from app.mktcore.wtfimports 	import *
from .models 					import *
import time
import app.tools.mktdashboard 	as mktdashboard
import app.tools.user 		  	as mktuser
import app.tools.mktsetting 	as mktsetting


class FRM_DASHBOARD(exform):
	LOCAL_REGISTER_PATH = mktsetting.getAppSetting('LOCAL_REGISTER_PATH')	
	
	if LOCAL_REGISTER_PATH:
		try:
			path = LOCAL_REGISTER_PATH + ".tools.mktdashboard"
			mktdashboardex = __import__(path, fromlist=['WidgetManagerEx'])
			WidgetManager = mktdashboardex.WidgetManagerEx
		except ImportError as e:
			print e
			WidgetManager = mktdashboard.WidgetManager
			
		except Exception as e:
			raise
	else:
		WidgetManager = mktdashboard.WidgetManager

	ListWidget = WidgetManager().getListWidget()

	Description=TextField(requiredlabel("Description","*"),[validators.Required()])

	Widget1=SelectField(requiredlabel('Widget 1',"*"),
							 choices=ListWidget,
							 coerce=str,
							 validators=[validators.Required()],
							 description="1-DETAILS")
	Size1=SelectField(requiredlabel('Size 1',"*"),
							 choices=[('','--None--'),('1','1'),('2', '2'),('3','3')],
							 coerce=str,
							 validators=[validators.Required()],
							 description="1-DETAILS")

	Widget2=SelectField('Widget 2',
							 choices=ListWidget,
							 coerce=str,
							 description="1-DETAILS")
	Size2=SelectField('Size 2',
							 choices=[('','--None--'),('1','1'),('2', '2'),('3','3')],
							 coerce=str,
							 description="1-DETAILS")

	Widget3=SelectField('Widget 3',
							 choices=ListWidget,
							 coerce=str,
							 description="1-DETAILS")
	Size3=SelectField('Size 3',
							 choices=[('','--None--'),('1','1'),('2', '2'),('3','3')],
							 coerce=str,
							 description="1-DETAILS")

	@staticmethod
	def isMultiValue():
		controls_list=["1-DETAILS"]
		return controls_list