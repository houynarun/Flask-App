from app.mktcore.wtfimports import *
from app.Country.models 	import *
from .models 				import *
from app.Account.models 	import *
import app.tools.mktautoid 		as mktautoid
import app.tools.mktaudit 		as mktaudit
import app.tools.mktdate 		as mktdate


def loadCountry(ID=''):
	if ID:
		return MKT_COUNTRY.query.filter_by(ID=ID).one()
	else:
		return MKT_COUNTRY.query


def loadPayableCategory():
	return MKT_CATEGORY.query.filter(MKT_CATEGORY.Description.like('%Payable%'))


class FRM_LENDER(exform):

	CompanyFullName 		= TextField(requiredlabel("Company Full Name","*"),
										validators=[validators.Required()]
										)
	CompanyShortName 		= TextField(requiredlabel("Company Short Name","*"),
										validators=[validators.Required()]
										)
	RepresentativeName 		= TextField(requiredlabel("Representative Name","*"),
										validators=[validators.Required()]
										)
	RegisterNumber 			= TextField("Register Number")
	RegisterDate 			= DateField("Register Date", validators=[validators.Optional()])
	Country 				= QuerySelectField(requiredlabel("Country","*"),
										 		query_factory=loadCountry,
										 		get_label=u'Description',
										 		blank_text='--Choose Country--',
										 		allow_blank=True,
										 		default=lambda : loadCountry('KH'),
										 		validators=[validators.Required()]
												)
	Address 				= TextAreaField("Address",
											validators=[validators.Length(max=200)])
	ContactNumber 			= TextField("Phone Number",
										description='1-Contact'
										)
	ContactPerson 			= TextField("Contact Person",
										description='1-Contact'
										)
	Email 					= TextField("Email",
										description='1-Contact'
										)
	Website 				= TextField("Website",
										description='1-Contact'
										)
	Facebook 				= TextField("Facebook",
										description='1-Contact'
										)
