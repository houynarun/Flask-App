from app.mktcore.wtfimports import *
from .models import *
from app.Currency.models import *
from wtforms                    import DecimalField


def loadCurrency():
    return MKT_CURRENCY.query

class FRM_CBC_ACTION(exform):

    Description = TextField(requiredlabel("Description","*"),
                            validators=[validators.Required(), validators.Length(max=35)])

    Currency    = QuerySelectField("Currency",
                                    query_factory=loadCurrency,
                                    get_label='Description',
                                    allow_blank=True,
                                    blank_text=u'--None--')

    Price       = TextField("Price")


    @staticmethod
    def moneyField():
        return [["Price", "Currency"]]

    @staticmethod
    def formatMoney():
        return ["Price"], "Currency"