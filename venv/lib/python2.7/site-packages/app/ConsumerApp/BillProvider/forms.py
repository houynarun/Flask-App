from app.mktcore.wtfimports import *
from .models 				import *
from app.ConsumerApp.ProviderType.models import *
import app.tools.mktaccounting as mktaccounting


def loadProviderType():
	return MKT_BILL_PROVIDER_TYPE.query

class FRM_BILL_PROVIDER(exform):
	CustomerID 		= 	RemoteTextField(getLanguage("Customer"))
	Description 	= 	TextField(requiredlabel(getLanguage("Description"), "*"), [validators.Required()])
	LocalDescription= 	TextField(requiredlabel(("Local Description"), "*"), [validators.Required()])
	ProviderType 	= 	QuerySelectField('Provider Type',
							query_factory=loadProviderType,
							get_label=lambda a: a.ID + " - " + a.Description,
							allow_blank=True,
							blank_text=u'--None--')
	Category 	= 	QuerySelectField('Category',
							query_factory=mktaccounting.loadCategory,
							get_label=lambda a: a.ID + " - " + a.Description,
							allow_blank=True,
							blank_text=u'--None--')
	CredentialType  = 	TextField(requiredlabel("Credential Type","*"), [validators.Required()])
	CredentialID    = 	TextField("Credential ID")
	Logo            =   TextField(requiredlabel(("Logo"), "*"), [validators.Required()])
	Active          =   SelectField(("Active"),choices=[('Y', 'Yes'),('N', 'No')],
							 coerce=str,default="Y")

