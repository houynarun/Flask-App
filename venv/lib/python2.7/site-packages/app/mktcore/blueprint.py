from admin import *
class registerCRUD:

    def __init__(self, app, url, endpoint,objform=[],model=[],template=None,form_type='MainForm',custom_form_data=None,decorators=[],  **kwargs):


        view = CRUDView.as_view(endpoint, endpoint=endpoint,custom_form_data=custom_form_data,
                            model=model,objform=objform,template=template,form_type=form_type, **kwargs)
           
        for decorator in decorators:
            view = decorator(view)

        newURL = [url,"/API"+url]
        for url in newURL:
            app.add_url_rule('%s/' % url, view_func=view, methods=['GET', 'POST'])
            #app.add_url_rule('%s/<string:obj_id>/' % url, view_func=view)
            app.add_url_rule('%s/<operation>/' % url, view_func=view, methods=['GET'])
            app.add_url_rule('%s/<operation>/<string:obj_id>/' % url, view_func=view,
                             methods=['GET'])

            app.add_url_rule('%s/<operation>/<string:obj_id>/<int:page>/' % url, view_func=view,
                             methods=['GET'])







