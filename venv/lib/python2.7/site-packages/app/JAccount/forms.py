# from wtforms import DecimalField, SelectMultipleField, QuerySelectMultipleField
from wtforms.ext.sqlalchemy.fields import QuerySelectMultipleField
from app.mktcore.wtfimports import *
from .models import *
import time
from app.Interest.models import MKT_INTEREST
from app.Currency.models import MKT_CURRENCY
from app.Customer.models import MKT_CUSTOMER
from app.tools.mktcustomer import *

@app.route("/Morakot/CustomerNameByID", methods=['GET'])
def getCustomerNameByID():

	CustomerID 		= 	request.args.get('CustomerID')
	CustomerName 	= 	""
	query 			= 	MKT_CUSTOMER.query.get(CustomerID)
	
	if query:
		CustomerName = str(query.LastNameEn) + " " + str(query.FirstNameEn)

	return jsonify(CustomerName=CustomerName)

class FRM_JACCOUNT(exform):

	Description 		= 	TextField(requiredlabel(getLanguage("Description"), "*"), [validators.Required()])
	SpecInstruction 	= 	TextAreaField(getLanguage("Special Instruction"))
	CustomerID 			= 	TextField(requiredlabel(getLanguage("Customer ID"), "*"), [validators.Required()], description="1-%s" %getLanguage("Customer"))
	CustomerName 		= 	TextField(requiredlabel(getLanguage("Customer Name"), "*"), [validators.Required()], description="1-%s" %getLanguage("Customer"))

	@staticmethod
	def hotField():
		hotfield = []

		fielddisplay 	= "$('#CustomerName').val(data.CustomerName)"
		varname 		= "CustomerID:$('#CustomerID').val()"
		fun 			= ["CustomerID", varname, fielddisplay, "/Morakot/CustomerNameByID", "blur"]
		hotfield.append(fun)

		return hotfield

	@staticmethod
	def isMultiValue():
		controls_list=["1-Customer"]
		return controls_list

	@staticmethod
	def setDisable():
		fields = [('CustomerName')]
		return fields