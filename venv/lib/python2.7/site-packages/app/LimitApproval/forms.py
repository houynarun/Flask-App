from app.mktcore.wtfimports import *
from app.Currency.models 	import MKT_CURRENCY
from sqlalchemy 			import asc
from app.urlregister        import *
from .models import *


# get all form in project
def getAllForms():

    result = []

    for obj in globals():
        if 'FRM_' in obj:
            result.append((obj, obj))

    result.sort(key=lambda tup: tup[1])
    result.insert(0, ('','--None--'))
    return result


def loadCurrency():
	return MKT_CURRENCY.query.order_by(asc(MKT_CURRENCY.ID)).all()


class FRM_LIMITAPPRO(exform):
	#AppName=TextField(requiredlabel("Application Name","*"), [validators.Required()])
	Description		=	TextField(requiredlabel("Description","*"), [validators.Required()])
	FormName        =   SelectField(requiredlabel('Form Name', '*'),
                                                        choices = getAllForms(),
                                                        validators = [validators.Required()])
	FieldName       =   TextField(requiredlabel("Amount Field","*"), [validators.Required()])

	Currency        =   TextField(requiredlabel("Currency Field","*"), [validators.Required()])

	Rules		    =  TextAreaField(requiredlabel("Rules","*"))

