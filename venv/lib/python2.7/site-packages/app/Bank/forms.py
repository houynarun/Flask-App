from app.mktcore.wtfimports import *
from .models import *
from app.Category.models 		import MKT_CATEGORY
import app.tools.mktsetting 	as mktsetting
def loadCategory():

	JOURNAL_ENTRY_EXCLUDED = mktsetting.getExcludedCategories()

	return 	MKT_CATEGORY.query.\
			filter(~MKT_CATEGORY.ID.in_(JOURNAL_ENTRY_EXCLUDED)).\
			all()

class FRM_BANK(exform):
	Description = TextField(requiredlabel("Description", "*"), [validators.Required()])
	Category 	= QuerySelectField("Category",
										query_factory=loadCategory,
										get_label=lambda a: a.ID + " - " + a.Description,
										allow_blank=True,
										blank_text=u'--None--')
	AccountNo 	= TextField("Account No")

