from app.mktcore.imports import *
from .forms import *

registerCRUD(admin, '/ArchiveRule', 'ArchiveRule',FRM_ARCHIVE_RULE, [MKT_ARCHIVE_RULE])


@app.route('/Morakot/Archive', methods=['GET'])
@app.route('/Morakot/API/Archive', methods=['GET'])
@checkLogOutSession
@checkLogOutTime
def getArchive():
	# from app.urlregister import *
	# Block check access right
	ErrorMsg 	= []
	getCheck 	= checkAccess("/Morakot/Archive/","Search")
	if getCheck != True: 
		ErrorMsg.append(msg_error+msg_permission)
		return render_template("permission.html",ErrorMsg=ErrorMsg)
	ArchiveRule = MKT_ARCHIVE_RULE.query.get('1')

	ArchiveTable = ArchiveRule.TableName
	Criteria 	= ArchiveRule.Criteria
	# Module = __import__("app.urlregister")


	return render_template("maintenance/archive.html",ArchiveRule=Criteria,Criteria=Criteria)