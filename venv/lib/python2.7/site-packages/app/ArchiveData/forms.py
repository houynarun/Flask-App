from app.mktcore.wtfimports import *
from .models import *
import time


# Get all table in current database
def getAllTable():

	tableList = []
	for table in db.metadata.sorted_tables:
		if 'INAU' not in table.name and 'HIST' not in table.name:
			tableList.append((table.name, table.name))
	tableList.sort(key=lambda tup: tup[1])
	return tableList

# ArchiveRule
class FRM_ARCHIVE_RULE(exform):

	Description 	=	TextField(requiredlabel("Description","*"),[validators.Required()])
	TableName 		=	SelectField(requiredlabel('Table Name', '*'),
							choices = getAllTable(),
							coerce = str,
							default = '0',
							validators = [validators.Required()]
						)
	Criteria 		=	TextAreaField(requiredlabel("Criteria","*"),[validators.Required()])

