
import app.tools.mkttool 		as mkttool
import app.tools.mktdatamigration as mktmigrate
	
from app.RepaymentSchedule.models import *

def validatePastDue(DictRecord):
	"""
		Validate Past Due
	"""
	DictMessage = {}

	# Field Check Prefix
	Prefix 		= [('PD','ID')]
	
	# Field Check record found in database
	RecordFound = [('PD','MKT_PD_DATE'), ('Currency','MKT_CURRENCY'), ('Category','MKT_CATEGORY'), ('LoanID','MKT_LOAN_CONTRACT'), ('Customer',"MKT_CUSTOMER")]

	# Field Check required
	Required 	= ['Branch', 'ID', 'LoanID', 'Customer', 'Currency', 'Category', 'TotODAmount','TotPrincipalDue',
				   'TotInterestDue', 'TotPenaltyDue','PenaltyType','PenaltyRate']

	# Check multi record that belong to
	RecordFoundMulti = [('MKT_LOAN_CONTRACT','ID','ContractCustomerID','LoanID','Customer'),
						('MKT_LOAN_CONTRACT','ID','Branch','LoanID','Branch')]

	# LookupSum = [('TotODAmount', 'MKT_PD_DATE', 'OutAmount', {'ID':'ID'}),
	# 			 ('TotPrincipalDue', 'MKT_PD_DATE', 'OutPriAmount', {'ID':'ID'}),
	# 			 ('TotInterestDue', 'MKT_PD_DATE', 'OutIntAmount', {'ID':'ID'}),
	# 			 ('TotPenaltyDue', 'MKT_PD_DATE', 'OutPenAmount', {'ID':'ID'}),
	# 			 ('TotChargeDue', 'MKT_PD_DATE', 'OutChgAmount', {'ID':'ID'})]

	LookupSum = []
	
	DictMessage = mktmigrate.exeFunctionValidate(	DictRecord=DictRecord, 
													Required=Required, 
													RecordFound=RecordFound, 
													Prefix=Prefix, 
													LookupSum=LookupSum, 
													DebugMode=False
												)
	return DictMessage

def validatePastDueDate(DictRecord):
	"""
		Validate Past Due Detail
	"""
	DictMessage = {}

	# Field Check Prefix
	Prefix 		= [('PD','ID')]

	# Field Check required
	Required 	= ['Branch', 'ID', 'PDID', 'DueDate', 'NumDayDue', 'ODStatus', 'TotODAmount','OutAmount',
				   'PrincipalDue', 'OutPriAmount','InterestDue','OutIntAmount','PenaltyDue','OutPenAmount',
				   'ChargeDue','OutChgAmount','NextRunDate']

	# Format Date
	FormatDate = ['DueDate', 'NextRunDate']

	# Number 
	Number 	= 	['NumDayDue', 'TotODAmount','OutAmount','PrincipalDue',
				'OutPriAmount','InterestDue','OutIntAmount','PenaltyDue','OutPenAmount','ChargeDue',
				'OutChgAmount'
				]

	Choices	=	[
					("ODStatus", ("PRE","GRA","PDO"))
				]

	DictMessage = mktmigrate.exeFunctionValidate(	DictRecord=DictRecord, 
													Required=Required, 
													Prefix=Prefix, 
													FormatDate=FormatDate, 
													Number=Number, 
													Choices = Choices, 
													DebugMode=False
												)

	return DictMessage