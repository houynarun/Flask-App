from wtforms 						import DecimalField, IntegerField
from app.mktcore.wtfimports 		import *
from .models 						import *
from app.Currency.models 				import *

def loadCurrency():
	return MKT_CURRENCY.query


class FRM_PAYMENT_GATEWAY(exform):

	Account  		= 	TextField(requiredlabel('Account Number','*'),[validators.Required()])
	Reference 		= 	TextField("Reference")
	Amount 			= 	TextField(requiredlabel("Amount","*"))
	Currency 		= 	TextField("Currency")

	GatewayStatus 	= 	SelectField(requiredlabel("Gateway Status",'*'),
									choices=[('1','Queue'),
											 ('2','Success'),
											 ('3','Fail'),
									 		 ('4','Retry')],
									coerce = str)
	GatewayType 	= 	SelectField(requiredlabel("Gateway Type","*"),
									choices=[('1','Wing'),
											 ('2','True Money'),
											 ('3','Payment')],
									coerce=str)
	Operation 		= 	SelectField(requiredlabel("Operation","*"),
									choices=[('D','Deposit'),
											 ('W','Withdrawal')],
									coerce=str)
	Purpose 		= 	SelectField(requiredlabel("Purpose","*"),
									choices=[('1','Acc Validation'),
											 ('2','Payment')],
									coerce=str)
	Session 		= 	TextField("Session")
	Mobile1 		= 	TextField("Mobile Phone 1")
	Attribute1 		= 	TextField("Attribute 1")
	Attribute2 		= 	TextField("Attribute 2")
	Attribute3 		= 	TextField("Attribute 3")
	Attribute4 		= 	TextField("Attribute 4")
	Attribute5 		= 	TextField("Attribute 5")
	Attribute6 		= 	TextField("Attribute 6")
	Attribute7 		= 	TextField("Attribute 7")
	Attribute8 		= 	TextField("Attribute 8")

	# def validate_GatewayStatus(field,form):
	# 	GatewayStatus = request.form['GatewayStatus'] 
		
	# 	if request.method=="POST":
	# 		if str(GatewayStatus) in ['2','3']:
	# 			# 2 :success,3:Fail
	# 			raise ValidationError("Success or Fail is not allowed to choose.")

	@staticmethod
	def formReadOnly():
		if request.method=="GET":
			ID 				  = g.formID
			PaymentGatewayObj = MKT_PAYMENT_GATEWAY.query.get(ID)

			if PaymentGatewayObj:

				GatewayStatus 	= PaymentGatewayObj.GatewayStatus
				if int(GatewayStatus)==2:
					return True
