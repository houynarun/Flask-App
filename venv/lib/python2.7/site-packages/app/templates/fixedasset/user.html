{% extends "layout.html" %}

{% block css %}
<style type="text/css">
.table-borderless td,
.table-borderless th
{
	border: 0 !important;
	padding-top: 3px !important;
	font-size: 14px;
}
th.table-header{
	border-bottom: 2px solid #ccc !important;
}
 h3.header-3{
			color: #888 !important;
			font-size: 16px;
			font-weight: bold;
			margin: 5px 0 10px;
			padding: 10px 18px 0;
		}

		h4.header-4{
			color: #888 !important;
			font-size: 14px;
			font-weight: normal;
			margin: 5px 0 10px;
			padding: 0px 18px 0;
		}
</style>
{% endblock %}

{% block content %}
<form method="GET" id="frm" name="frm" role="form" >
<!-- Modal -->
<div class="modal fade" id="getCustomRange" tabindex="-1" 
		role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
		<div class="modal-dialog">
			<div class="modal-content">
				
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
						<h4 class="modal-title" id="exampleModalLabel">Custom View</h4>
					</div>
					<div class="modal-body">
						<input type="hidden" name="ID" value="{{ID}}">
						<div class="form-group">
							<label for="Branch" class="col-sm-6 control-label">Branch:</label>
							<div class="col-sm-6">
								<input class="form-control input-sm" name="Branch" value="{{Branch}}" placeholder="Branch" style="width: 100%;" id="Branch"/>
							</div>
						</div>

						<div class="form-group">
							<label for="End" class="col-sm-6 control-label">Start Date:</label>
							<div class="col-sm-6">
								<input class="form-control input-sm" style="width: 100%;" value="{{Start}}" placeholder="Start Date" name="Start" id="StartDate" />
							</div>
							<script type="text/javascript">
								init.push(function () {
					                var options = {
					                orientation: $('body').hasClass('right-to-left') ? "auto right" : 'auto auto',
					                format:"yyyy-mm-dd",
					                autoclose:true
					                }
				                	$('#StartDate').datepicker(options);
				                });
							</script>
						</div>

						<div class="form-group">
							<label for="End" class="col-sm-6 control-label">End Date:</label>
							<div class="col-sm-6">
								<input class="form-control input-sm" style="width: 100%;" value="{{End}}" placeholder="End Date" name="End" id="EndDate" />
							</div>
							<script type="text/javascript">
								init.push(function () {
					                var options = {
					                orientation: $('body').hasClass('right-to-left') ? "auto right" : 'auto auto',
					                format:"yyyy-mm-dd",
					                autoclose:true
					                }
				                	$('#EndDate').datepicker(options);
				                });
							</script>
						</div>

					</div>

					<div class="modal-footer">
						<div style="display: flex;justify-content: flex-end;color:#777">
							<p><span style="color: red">*</span>Note&nbsp;:&nbsp;</p>
							<p style="text-align: justify;">Start Date and End Date is a range of date when the asset is assinged. It mean that you want to filter Start Using Date which is between Start Date and End Date.</p>
						</div>
						<button type="submit" class="btn btn-primary" id="Apply">Apply</button>
						<button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
					</div>
				
			</div>
		</div>
	</div>
<!-- / Modal -->
</form>
	<div class="navbar navbar-default navbar-static-top">
		<div class="col-sm-6" style="margin-top: 15px;">
			<!-- Button Export -->
			{% from "print.html" import exportButtonLink %}
			{{exportButtonLink()}}
		</div>
		
		<div class="col-sm-6" style="margin-top: 8px;">
			<a href="javascript:void(0)" title="Refresh" id="Refresh" class="btn btn-flat btn-labeled btn-warning pull-right" style="margin-left: 5px;">
				<span class="btn-label icon fa fa-refresh"></span> Refresh
			</a>
			<div style="margin-right: 10px">
				<button type="button" class="btn btn-flat btn-labeled btn-success pull-right" data-toggle="modal" data-target="#getCustomRange">
					<span class="btn-label icon fa fa-gear"></span> Custom
				</button>
			</div>
			
			
		</div>
	</div>
	<!--  message  -->
	<div class="clearfix"></div>
	<div class="col-sm-12">
		{% for message in get_flashed_messages() %}
			{% if contain(message, "Error") %}
				<div class="clearfix">&nbsp;</div>
				<div class="alert alert-danger">
					<button type="button" class="close" data-dismiss="alert">&times;</button>
					{{ message }}
				</div>
			{% else %}
				<div class="clearfix">&nbsp;</div>
				<div class="alert alert-info">
					<button type="button" class="close" data-dismiss="alert">&times;</button>
					{{ message }}
				</div>
			{% endif %}
		{% endfor %}
	</div>

	<div style="margin-left:10%; margin-right:10%;">
		
		<h3 class="text-center">Fixed Asset User Reports</h3>
	
	</div>
	<div class="clearfix">&nbsp;</div>
	<!-- DataTable -->
	<div class="col-sm-12">
		<div class="panel panel-default" style="border: 0px;">
		
		</div>
		<div class="clearfix" style="height: 5px;">&nbsp;</div>
		<table id="mktlist" class="table table-striped table-borderless" cellspacing="0" width="100%">
			<thead>
				<tr>
					<th class="table-header text-left">Branch</th>
					<th class="table-header text-left">Staff Name</th>
					<th class="table-header text-left">Asset</th>
					<th class="table-header text-center">Serial Number</th>
					<th class="table-header text-center">Start Using Date</th>
					<th class="table-header text-center">Stop Using Date</th>
					<th class="table-header text-left">Status</th>
				</tr>
			</thead>
			<tbody>
			{% for result in Result %}
				<tr>
					<td class="text-left">{{result['Branch']}}</td>
					<td class="text-left">{{result['StaffName']}}</td>
					<td class="text-left">{{result['Asset']}}</td>
					<td class="text-center">{{result['SerialNumber']}}</td>
					<td class="text-center">{{result['UsingDate']}}</td>
					<td class="text-center">{{result['StopUsingDate']}}</td>
					<td class="text-left">{{result['Status']}}</td>
				</tr>
			{% endfor %}
			</tbody>
			<!-- <tfoot>
			
			</tfoot> -->
		</table>
	<br>
	</div>

{% endblock %}

{% block js %}
	{% from "print.html" import exportIncludeJS %}
	{{exportIncludeJS()}}
	<script type="text/javascript">
		//Search dataTable
		$(document).ready(function() {
			$('#mktlist').dataTable({
				"lengthMenu"    : [[25,50,100,200, -1], [25,50,100,200, "All"]],
				"bSort"         : true,
				"pageLength"    : 25,
			});
			$("#Refresh").click(function() {
				fn_fadeIn();
				window.location.reload(true);
			});
			{% from "print.html" import exportDataTable %}
			{{exportDataTable('#mktlist','Branch Productivity')}}
		});
	</script>
{% endblock %}