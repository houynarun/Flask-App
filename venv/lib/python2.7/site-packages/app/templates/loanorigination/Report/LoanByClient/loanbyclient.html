{% extends "layout.html" %}

{% block css %}
<style type="text/css">
.text-center{
	font-size: 13px;
	font-weight: bold;
}

tr.head {
    background: #FCD5B5;
    font-weight: bold;
    text-align: center;
}

.Title{
    font-size: 30px;
}

        h3.header-3{
            color: #888 !important;
            font-size: 20px;
            font-weight: bold;
            margin: 5px 0 10px;
            padding: 10px 18px 0;
            line-height: 30px;
        }

        h3.header-33{
            color: #888 !important;
            font-size: 26px;
            font-weight: bold;
            margin: 0px 0 10px;
            line-height: 20px;
            
        }

        h4.header-4{
            color: #888 !important;
            font-size: 14px;
            font-weight: normal;
            margin: 5px 0 10px;
            padding: 0px 18px 0;
        }

        .input-sm {

            width: 214px !important;
        }

        .modal-dialog{

            width: 428px !important;

        }

        .form-label{
            padding-top: 7px;
        }

        .modal-body {
            z-index: 99999 !important;
        }

        .se-pre-con1 {
            position: fixed;
            left: 0px;
            top: 0px;
            width: 100%;
            height: 100%;
            z-index: 9999;
            background: #FFF url("{{ url_for('static',filename='images/loading.gif') }}") center no-repeat;
            opacity: 0.4;
            display: none;
        }

        .form-label{
            padding-top: 7px;
        }
 .grandtotal{
            font-size:14px;  
            font-weight: bold;
        }
         table { table-layout: fixed; }
    .subject { width: 500px; }
    .amount {width: 90px;}
    .name {width: 140px;}
    .income{width: 120px;}
</style>
{% endblock %}

{% block content %}
<form method="GET" id="frm" name="frm" role="form" >
<!-- Modal -->
<div id="myModal" class="modal fade" tabindex="-1" role="dialog" style="display: none;">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">Ã—</button>
                <h4 class="modal-title" id="myModalLabel">Custom</h4>
            </div>
            <div class="modal-body">
                <div class="form-group">
                         <label for="Branch" class="col-sm-3 control-label"><label for="Branch"> Branch: </label></label>
                    <div class="col-sm-5">
                        <input class="form-control" id="Branch" name="Branch" type="text" value="{{Result['Branch']}}" style="width: 210px;">
                    </div>
                </div>
            </div> <!-- / .modal-body -->
            <div class="modal-footer">
                
                <button type="submit" class="btn btn-primary">{{ getLanguage('Apply') }}</button>
                <button type="button" class="btn btn-default" data-dismiss="modal">{{ getLanguage('Cancel') }}</button>
            </div>
        </div> <!-- / .modal-content -->
    </div> <!-- / .modal-dialog -->
</div> <!-- /.modal -->
<!-- / Modal -->
</form>

     <div class="navbar navbar-default navbar-static-top" id="CriteriaSetting" >
        <div class="col-sm-12">
            <div style="margin-top: 8px;">

            </div> 
            <div class="col-sm-6" style="padding-top:10px; padding-left:0px;">

                {% from "print.html" import exportButtonLink %}
                {{exportButtonLink()}}

            </div>
 <a href="javascript:void(0)" title="Refresh" id="Refresh" class="btn btn-flat btn-labeled btn-warning pull-right" style="margin-left: 5px;">
                <span class="btn-label icon fa fa-refresh"></span> Refresh
            </a>
            <button  type="button" data-toggle="modal" data-target="#myModal"  class="btn btn-flat btn-labeled btn-success pull-right" >
            <span class="btn-label icon fa fa-gear" ></span> Custom </button>
        </div> 
    </div>

        <div style="margin-left:10%; margin-right:10%;">
            <h3 class="header-3 text-center">{{ Result['Company'] }}</h3>
            <h4 class="header-4 text-center">{{ Result['Title'] }}</h4>
            <h4 class="header-4 text-center"><strong>As of:</strong> {{ Result['BankDate'] }}</h4>
        </div>
        <div class="clearfix">&nbsp;</div>

    <div class="row">
    <div class="col-sm-12">
        <table>
              <tbody>
                <tr>
                    <td width="150"><h5><strong>Branch</strong></h5></td>
                    <td><h5>: {{ Result['Branch'] }}</h5>  </td>
                </tr>
            </tbody>
        </table>
    </div>

    <div class="clearfix"></div>

{% include 'msg_error.html' %}

    <div class="row">
        <div class="col-xs-12">
            <table id="mktlist" class="table table-hover table-striped"  cellspacing="0" style="width:3000px; margin-left: 15px;">
            <thead class="grandtotal">
                <tr>
                    <th class="text-center" rowspan="2">Account</th>
                    <th class="text-center" rowspan="2">Clients Name</th>
                    <th class="text-center" rowspan="2">Sex</th>
                    <th class="text-center" rowspan="2">Total # of Household</th>
                    <th class="text-center" rowspan="2">Approved Date</th>
                    <th class="text-center" rowspan="2">Approved Amount</th>
                    <th class="text-center" rowspan="2">Total Disburse</th>
                    <th class="text-center" rowspan="2">Monthly Repayment</th>
                    <th class="text-center" rowspan="2">Tenor (Months)</th>
                    <th class="text-center" rowspan="2">Maturity Date</th>
                    <th class="text-center" rowspan="2">Loan Type</th>
                    <th class="text-center" rowspan="2">Interest Rate</th>
                    <th class="text-center" rowspan="2">Title Deed</th>
                    <th class="text-center" colspan="4" ="">Property Area</th>
                    <th class="text-center" rowspan="2">Property Price (USD)</th>
                    <th class="text-center" rowspan="2">CMV (USD)</th>
                    <th class="text-center" rowspan="2">Income Source</th>
                    <th class="text-center" rowspan="2">Total Avg Monthly Income</th>
                    <th class="text-center" rowspan="2">Accessed By</th>
                </tr>
                <tr>
                    <th class="text-center">City/Provincial</th>
                    <th class="text-center">District/Khan</th>
                    <th class="text-center">Commune/SK</th>
                    <th class="text-center">Village</th>
                </tr>
            </thead>
            <tbody>
                {% for key,value in ReportDict.iteritems() %}
                    <tr>
                        <td>{{value.Account}}</td>
                        <td>{{value.FullName}}</td>
                        <td>{{value.Gender}}</td>
                        <td class="text-right">{{value.HouseHoldMember}}</td>
                        <td>{{value.ApprovedDate}}</td>
                        <td class="text-right">{{value.ApprovedAmount}}</td>
                        <td class="text-right">{{value.Disbursed}}</td>
                        <td class="text-right">{{value.MonthlyRepayment}}</td>
                        <td class="text-right">{{value.Installment}}</td>
                        <td>{{value.MaturityDate}}</td>
                        <td>{{value.LoanType}}</td>
                        <td class="text-right">{{value.InterestRate}}</td>
                        <td>{{value.TitleType}}</td>
                        <td>{{value.Province}}</td>
                        <td>{{value.District}}</td>
                        <td>{{value.Commune}}</td>
                        <td>{{value.Village}}</td>
                        <td class="text-right">{{value.PropertyPrice}}</td>
                        <td class="text-right">{{value.PropertyPrice}}</td>
                        <td>{{value.SourceOfIncome}}</td>
                        <td>{{value.AccessdB}}</td>
                        <td>{{value.AccessdBy}}</td>
                    </tr>
                {% endfor %}
            </tbody>

            <tfoot>
                {% set Total = Result['Total']%}
                <tr>
                    <td class="text-bold">Total:</td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td class="text-right text-bold">{{ReportDict|length}}</td>
                    <td class="text-right text-bold">{{Total.TotalApprovedAmount}}</td>
                    <td class="text-right text-bold">{{Total.TotalDisbursed}}</td>
                    <td class="text-right text-bold">{{Total.TotalMonthlyRepayment}}</td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                </tr>
            </tfoot>
            </table>
        </div>
        <!-- Note -->
        <div class="col-sm-11" style="margin-left: 15px;">
            <table>
            <h5><strong><u>Note:</u></strong></h5>
                <tbody>
                    {% set CurrencyDict = Result['CurrencyDict'] %}
                    <tr>
                        <td ><b>(1)</b> Based Currency:  <b></b></td>
                        <td ><b></b> {{CurrencyDict['BasedCurrency']}} <b></b></td>
                    </tr>
                    <tr>
                        <td><b>(2)</b> Exchange Rate: <b></b></td>
                        <td><b></b> {{CurrencyDict['ForeignExchangeRate']}} <b></b></td>
                    </tr>
                    <tr>
                        <td colspan="2">&nbsp;</td>
                    </tr>
                    <tr>
                        <th width="250">Total Avg Monthly Income:</th>
                        <td>.......</td>
                    </tr>
                    <tr>
                        <th width="250" colspan="2"><i>All Amount is Converted into Based Currency</i></th>
                    </tr>
                </tbody>
            </table>
        </div>
        <!-- End note -->
    </div>

    

<div class="clearfix">&nbsp;</div>


{% endblock %}


{% block js %}
    
    {% from "print.html" import exportIncludeJS %}
    {{exportIncludeJS()}}

    <script src="{{ url_for('static',filename='javascripts/jquery.datatables.min.js') }}"></script>
    
    <script type="text/javascript">
        $(document).ready(function() {

             $("#Refresh").click(function() {
                fn_fadeIn();
                window.location.reload(true);
            });

            {% from "print.html" import exportDataTable %}
            {{exportDataTable('#mktlist', "Network Performance")}}

            init.push(function () {
                var options = {
                orientation: $('body').hasClass('right-to-left') ? "auto right" : 'auto auto',
                format:"yyyy-mm-dd",
                autoclose:true
                }
                $('#StartDate').datepicker(options);
            });

            $('select').select2();

            init.push(function () {
                var options = {
                orientation: $('body').hasClass('right-to-left') ? "auto right" : 'auto auto',
                format:"yyyy-mm-dd",
                autoclose:true
                }
                $('#EndDate').datepicker(options);
            });
        });

    </script>
{% endblock %}