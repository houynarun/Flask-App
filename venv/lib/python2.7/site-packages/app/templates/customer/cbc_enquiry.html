{% extends "layout.html" %}

{% block css %}
<style type="text/css">
body{
	/*background-color: #fff;*/
	/*color: #555;*/
	/*font-family: "Suwannaphum", Helvetica, Arial, sans-serif;*/
	font-size: 11px;
	/*line-height: 1.42857;*/
}
.title {
	font-size: 23px; 
	margin: 15px 0 5px 0;
}
.display-text {
  display: block;
  font-weight: bold;
  line-height: 21px;
  position: absolute;
  text-align: center;
  width: 100%;
}
.modal-dialog {
	width: 310px;
}
.space{
		margin-left: 2px;
	}
.accept-override-bg{
	background: #d9edf7;
	background-color: #bce8f1
	color:#3a87ad;
	background-size: 20px 20px;

}
</style>
<style type="text/css" media="print">
	body{
		font-size: 9px;
	}
	.title {
		font-size: 13px;
		font-weight: bold;
	}
	
</style>
{% endblock %}

{% block content %}

{%if ErrorMsg %}
	<div class="col-sm-12" style="padding-top:5px;">
		<div class="alert alert-danger">
		<button type="button" class="close" data-dismiss="alert">&times;</button>
		{%for message in ErrorMsg %}
			{{ message }}
		{%endfor%}
		</div>
	</div>
{%else%}

	<div class="navbar navbar-default navbar-static-top">
		<div class="col-sm-6" style="background: none">
			<form method="GET" id="frm" name="frm" role="form" action="">
				
					<div style="margin-top: 8px;">
						<div class="col-sm-4" style="padding-left: 0;">
							<input type="text" name="ID" class="form-control" value="{{ ID }}" style="width: 100%;" placeholder="Record ID *">
						</div>
						<label class="col-sm-1" style="padding:0px;">
							<button  id ="btnShow" data-toggle="modal" data-target="#reason" type="submit" class="btn btn-flat btn-labeled btn-primary" style="padding: 7px 25px;">
								{{ getLanguage('Show') }}
							</button>
						</label>
					</div>
				
			</form>
		</div>
		<div class="col-sm-2" style="margin-top: 8px;">
		</div>
		<div class="col-sm-4" style="margin-top: 8px;background: none">
			<div class="pull-right">				
				<a id="print" onclick="" class="btn btn-flat btn-labeled btn-success" style="margin-left: 3px">
					<span class="btn-label icon fa fa-print"></span> {{ getLanguage('Print') }}
				</a>
			</div>
		</div>
		
	</div>
	{% if Status == "FAIL" %}

		{%set CheckIsServer=isServer[0]%}
		{%set msg=isServer[1] %}
		{% if CheckIsServer==False %}
		<div style="font-size: 13px;margin: 10px" class="alert alert-danger">
			<button type="button" class="close" data-dismiss="alert">×</button>
			
				<p><span style="color: red">* </span>{{msg}}</p>
			
			<br>
		</div>
		{%else%}
		<div style="font-size: 13px;margin: 10px" class="alert alert-info">
			<button type="button" class="close" data-dismiss="alert">×</button>
			<p>This enquiry <a href="javascript:void(0);" class="link" onclick="ClickView('CBC','{{g_getUrlExtend(Module="CBC")}}','{{ID}}')">{{ID}}</a> was not check successfully due to below customer(s) in previous check: </p>
				{% for Element in ListConsumer %}
					<p style="margin-left: 10px;">
						<a href="javascript:void(0);" class="link" onclick="CustomClickView('Customer-{{Element['ConsumerID']}}','{{g_getUrlExtend(Module="Customer")}}/?ID={{Element['ConsumerID']}}')">{{Element['ConsumerID']}}
						</a> : 

						{% if Element['Status'] == 'Fail'%}

							<span style="color: red;">{{Element['Status']}} </span>
							<span>enquiry on (<b>{{Element['Date']}}</b>)</span>

						{% else %}

							<span style="color: blue;">{{Element['Status']}}</span>

						{% endif %}
					</p>

				{% endfor%}
			<div style="display: inline;">
				<p style="float: left;margin-right: 5px;">Do you want to re-check those fail customers ?</p>
				<form style="float: left;">
					<a id='btnYes' class='btn btn-flat btn-success btn-xs' href="?Accept={{ Accept }}&ID={{ ID }}" onclick="fn_fadeIn();">Yes</a>
					<!-- <a href="?Accept="N"  class='btn btn-flat btn-danger btn-xs space' >No</a> -->
				</form>
			</div>&nbsp;
			<button type="button" class="btn btn-flat btn-danger btn-xs" data-dismiss="alert">No</button>
			<br>
		</div>
		{% endif %}
	{% endif %}

	{% if ListError %}
		<div class="clearfix"></div>
		<div class="col-sm-12" style="padding-top:5px;">

			<div class="alert alert-danger" id="alert-danger">
				<button type="button" class="close" data-dismiss="alert">&times;</button>
				<ol>
					{% for message in ListError %}
					<li id="lblTableName">
						<a class="error_pointer" >
							<label for="TableName" style="width:15%;">
								{{message[0]}} <span style="color:#d38e99;">*</span>
							</label>
						</a> 
						: {{message[1]}}
					</li>
					{% endfor %}
				</ol>
				
			</div>
		</div>
	{% endif %}

	<!--  message  -->
	<div class="clearfix"></div>

	{% include 'error.html' %}

	{% if ResponseList %}
		{% for ResponseObj in ResponseList %}
			{% if ResponseObj %}
				{% if 'RESPONSE' in ResponseObj %}

					{# Status == OK #}
					{%if ResponseObj.RESPONSE.STATUS == 'OK' %}

						{% set ReportObj = ResponseObj.RESPONSE.MESSAGE.ITEM.RSP_REPORT %}

						<div class="col-xs-12">
							<div class="col-xs-4">
								<img src="{{ url_for('static', filename='company/cbc.jpg') }}" style="width: 100%">
							</div>
							<div class="col-xs-4">
								<h3 class="header-3 text-center">CBC Enquiry {{getCBCAction(ResponseObj.RESPONSE.ACTION)}}</h3>
							</div>
							<div class="col-xs-4">
								
							</div>
						</div>

						{% if ReportObj %}
							<div class="col-sm-12" style="padding:20px 10px">
								<div class="col-sm-6">
									<table>
										<tr>
											<td width="150"><strong>Report Date</strong></td>
											<td>: &nbsp; <b>{{ReportObj.REPORT_DATE}}</b></td>
										</tr>
										<tr>
											<td><strong>Enquiry Number</strong></td>
											<td>: &nbsp; <b>{{ReportObj.ENQUIRY_NO}}</b></td>
										</tr>
										<tr>
											<td><strong>Number of Applicant</strong></td>
											<td>: &nbsp; <b>{{ReportObj.NO_OF_APPLICANTS}}</b></td>
										</tr>
										<tr>
											<td><strong>Member Reference</strong></td>
											<td id='member_ref'>: &nbsp; <b>{{ReportObj.ENQUIRY_REFERENCE}}</b></td>
										</tr>
									</table>
								</div>
								<div class="col-sm-6" style="padding-right: 20px;">
									<table style="float: right;">
										<tr>
											<td width="150"><strong>Enquiry Type</strong></td>
											<td>: &nbsp; <b>{{getEnquiryType(ReportObj.ENQUIRY_TYPE,Vlookup=True)}}</b></td>
										</tr>
										<tr>
											<td><strong>Product Type</strong></td>
											<td>: &nbsp; <b>{{getProductTypeCBC(ReportObj.PRODUCT_TYPE,Vlookup=True)}}</b></td>
										</tr>
										<tr>
											<td><strong>Account Type</strong></td>
											<td>: &nbsp; <b>{{getAccountType(ReportObj.ACCOUNT_TYPE,Vlookup=True)}}</b></td>
										</tr>
										<tr>
											<td><strong>Amount</strong></td>
											<td>: &nbsp; <b>{{ReportObj.CURRENCY}} {{formatNumber(float(ReportObj.AMOUNT),1,0)}}</b></td>
										</tr>
									</table>
								</div>
							</div>
						{% endif %}

					{%if ReportObj.CONSUMER %}
						{# we case  CONSUMER to a list because of a consumer responding  is Dicationary type not iterable#}

						{% set Consumer =[ReportObj.CONSUMER] if ReportObj.CONSUMER is mapping  else ReportObj.CONSUMER %}
						{% if Consumer %}
							{% for ConsumerObj in Consumer %}

								<!-- Score -->
								{% if ConsumerObj.get('SCORE' , '') %}
									<div class="clearfix">&nbsp;</div>
									<div class="col-sm-12">
										<h3 class="title text-left">K-Score</h3>
										<table class="table table-striped panel panel-default" cellspacing="0" width="100%">
											<tbody>
												{% if ConsumerObj.SCORE.get('SC_ERROR', '') %}
													<td colspan="7">
														The score could not be calculated for the following reason: <br/>
														{{ConsumerObj.SCORE.SC_ERROR}}
													</td>
												{% else %}
													{% set ScoreObj = ConsumerObj.SCORE %}
													<tr>
														<td><b>Index</b></td>
														<td></td>
														<td></td>
														<td><b>Score</b></td>
														<td><b>Scorecard</b></td>
														<td><b>Odds</b></td>
														<td><b>Bad</b></td>
														<td><b>Minimum</b></td>
														<td><b>Maximum</b></td>
													</tr>
													<tr>
														<td colspan="3">
															<div class="progress" style="margin-top:18px;height: 20px;position: relative;">
																{%if ScoreObj.SC_SCOREINDEX | int == 5 %}
																	<div class="progress-bar" title="" style="width:20%;background-color:#018D46 !important;border-color: transparent;">
																	</div>
																	<div class="display-text">Very Low Risk</div>
																{%elif ScoreObj.SC_SCOREINDEX | int == 4 %}
																	<div class="progress-bar" title="" style="width:40%;background-color:#CADB2B !important;border-color: transparent;">
																	</div>
																	<div class="display-text">Low Risk</div>
																{%elif ScoreObj.SC_SCOREINDEX | int == 3 %}
																	<div class="progress-bar" title="" style="width:60%;background-color:#FEF102 !important;border-color: transparent;">
																	</div>
																	<div class="display-text">Moderate Risk</div>
																{%elif ScoreObj.SC_SCOREINDEX | int == 2 %}
																	<div class="progress-bar" title="" style="width:80%;background-color:#FF9F1D !important;border-color: transparent;">
																	</div>
																	<div class="display-text">Medium Risk</div>
																{% else %}
																	<div class="progress-bar" title="" style="width:100%;background-color:#D81823 !important;border-color: transparent;">
																	</div>
																	<div class="display-text">High Risk</div>
																{%endif%}
															</div>
														</td>
														<td>{{ScoreObj.SC_SCORE}}</td>
														<td>{{getScoreCard(ScoreObj.SC_SCORECARD)}}</td>
														{# <td>{{ScoreObj.SC_SCOREINDEX}}</td> #}
														<td>{{ScoreObj.SC_ODDS}}</td>
														<td>{{ScoreObj.SC_BAD}}%</td>
														<td>{{ScoreObj.SC_MINIMUM}}</td>
														<td>{{ScoreObj.SC_MAXIMUM}}</td>
													</tr>
												{% endif %}
											</tbody>
										</table>
									</div>
								{% endif %}
								<!-- consumer -->
								<!-- Data Provided vs (Primary Data Available) & Summary -->

								<div class="clearfix">&nbsp;</div>
								<div class="col-sm-12" id="Content">
									<div class="row">
										<h3 class="col-sm-6 title text-center">Data Provided vs (Primary Data Available)</h3>
										<h3 class="col-sm-6 title text-center">Summary</h3>
									</div>
									<div class="clearfix">&nbsp;</div>
									<div class="col-sm-12">

										<!-- Date Provided -->
										<div class="col-sm-6" style="padding-left:0px !important;">
											<table class="table table-striped panel panel-default table-hover" cellspacing="0" width="100%">
												<tbody>
											
													{% if ConsumerObj %}
														{% set ProvidedObj = ConsumerObj.PROVIDED %}
														{% set AvailableObj = ConsumerObj.AVAILABLE %}
														{% set ConsumerCID = ConsumerObj.CID %}
														<tr>
															<td><b>Applicant Type</b></td>
															<td>
																{% if ConsumerObj.CAPL == 'P' %}
																	Primary
																{% elif ConsumerObj.CAPL == 'G' %}
																	Guarantor
																{% else %}
																	Supplementary
																{% endif %}
															</td>
															<td>{{formatApplicantType(ConsumerObj.CAPL,Vlookup=True)}}</td>
														</tr>

														{% set ACIDObj = AvailableObj.get('ACID', None)%}

														<tr>
															<td><b>ID Type and Number</b></td>
															<td>{{getFormatIDType(ConsumerCID.CID1,Vlookup=True)}} {{ConsumerCID.CID2}}</td>
															<td>
																{% if ACIDObj %}
																	{% if ACIDObj.ACID1 and ACIDObj.ACID2 %}
																		{{getFormatIDType(ACIDObj.ACID1 ,Vlookup=True)}} {{ACIDObj.ACID1.ACID2}}
																	{% endif %}
																{% else %}
																	<td></td>
																{% endif %}

															</td>
														</tr>
														<tr>
															<td><b>ID Expiry Date</b></td>
															<td>{{ConsumerCID.CID3}}</td>
															{% if ACIDObj %}
																<td>{{ACIDObj.ACID3}}</td>
															{% else %}
																<td></td>
															{% endif %}
														</tr>
														<tr>
															<td><b>Khmer Name</b></td>
															<td></td>
															<td></td>
														</tr>
														<tr>
															<td><b>&ensp;&ensp;Family Name</b></td>
															<td>{{ProvidedObj.PCNAM.get('PCNMFA', '') }}</td>
															{% if AvailableObj.ACNAM %}
																<td>{{AvailableObj.ACNAM.get('ACNMFA', '') }}</td>
															{% else %}
																<td></td>
															{% endif %}
														</tr>
														<tr>
															<td><b>&ensp;&ensp;First Name</b></td>
															<td>{{ProvidedObj.PCNAM.get('PCNM1A', '')}}</td>
															{% if AvailableObj.ACNAM %}
																<td>{{AvailableObj.ACNAM.get('ACNM1A', '')}}</td>
															{% else %}
																<td></td>
															{% endif %}
														</tr>
														<tr>
															<td><b>&ensp;&ensp;Second Name</b></td>
															<td></td>
															{% if AvailableObj.ACNAM %}
																<td>{{AvailableObj.ACNAM.get('ACNM2A', '')}}</td>
															{% else %}
																<td></td>
															{% endif %}
														</tr>
														<tr>
															<td><b>&ensp;&ensp;Third Name</b></td>
															<td></td>
															{% if AvailableObj.ACNAM %}
																<td>{{AvailableObj.ACNAM.get('ACNM3A', '')}}</td>
															{% else %}
																<td></td>
															{% endif %}
														</tr>
														<tr>
															<td><b>&ensp;&ensp;Unformatted</b></td>
															<td></td>
															{% if AvailableObj.ACNAM %}
																<td>{{AvailableObj.ACNAM.get('ACNM7A', '')}}</td>
															{% else %}
																<td></td>
															{% endif %}
														</tr>
														<tr>
															<td><b>English Name</b></td>
															<td></td>
															<td></td>
														</tr>
														<tr>
															<td><b>Family Name</b></td>
															{% if ProvidedObj.PCNAM %}
																<td>{{ProvidedObj.PCNAM.get('PCNMFE', '')}}</td>
															{% else %}
																<td></td>
															{% endif %}
															{% if AvailableObj.ACNAM %}
																<td>{{AvailableObj.ACNAM.get('ACNMFE', '')}}</td>
															{% else %}
																<td></td>
															{% endif %}
														</tr>
														<tr>
															<td><b>&ensp;&ensp;First Name</b></td>
															{% if ProvidedObj.PCNAM %}
																<td>{{ProvidedObj.PCNAM.get('PCNM1E', '')}}</td>
															{% else %}
																<td></td>
															{% endif %}
															{% if AvailableObj.ACNAM %}
																<td>{{AvailableObj.ACNAM.get('ACNM1E', '')}}</td>
															{% else %}
																<td></td>
															{% endif %}
														</tr>
														<tr>
															<td><b>&ensp;&ensp;Second Name</b></td>
															<td></td>
															{% if AvailableObj.ACNAM %}
																<td>{{AvailableObj.ACNAM.get('ACNM2E', '')}}</td>
															{% else %}
																<td></td>
															{% endif %}
														</tr>
														<tr>
															<td><b>&ensp;&ensp;Third Name</b></td>
															<td></td>
															{% if AvailableObj.ACNAM %}
																<td>{{AvailableObj.ACNAM.get('ACNM3E', '')}}</td>
															{% else %}
																<td></td>
															{% endif %}
														</tr>
														<tr>
															<td><b>&ensp;&ensp;Unformatted</b></td>
															<td></td>
															{% if AvailableObj.ACNAM %}
																<td>{{AvailableObj.ACNAM.get('ACNM7E', '')}}</td>
															{% else %}
																<td></td>
															{% endif %}
														</tr>
														<tr>
															<td><b>Place Of Birth </b></td>
															<td></td>
															<td></td>
														</tr>
														<tr>
															<td><b>&ensp;&ensp;Date of Birth</b></td>
															<td>{{ProvidedObj.PCDOB}}</td>
															<td>{{AvailableObj.ACDOB}}</td>
														</tr>

														<tr>
															<td><b>&ensp;&ensp;Place Of Country</b></td>
															<td>{{getCountryDescription(ProvidedObj.PCPLB.PCPLBC)}}</td>
															<td>{{getCountryDescription(AvailableObj.ACPLB.ACPLBC)}}</td>
														</tr>

														<tr>
															<td><b>&ensp;&ensp;Place Of Province</b></td>
															<td>{%if ProvinceObj.get(ProvidedObj.PCPLB.get('PCPLBP', '')) %}
																	{{ProvinceObj.get(ProvidedObj.PCPLB.get('PCPLBP', '')).Description}}
																{%endif%}
															</td>
															<td>
																{%if ProvinceObj.get(AvailableObj.ACPLB.get('ACPLBP', '')) %}
																	{{ProvinceObj.get(AvailableObj.ACPLB.get('ACPLBP', '')).Description}}
																{%endif%}
															</td>
														</tr>
														<tr>
															<td><b>&ensp;&ensp;Place Of District</b></td>
															<td>
																{%if DistrictObj.get(ProvidedObj.PCPLB.get('PCPLBD', '')) %}
																	{{DistrictObj.get(ProvidedObj.PCPLB.get('PCPLBD', '')).Description}}
																{%endif%}
															</td>
															<td>
																{%if DistrictObj.get(AvailableObj.ACPLB.get('ACPLBD', '')) %}
																	{{DistrictObj.get(AvailableObj.ACPLB.get('ACPLBD', '')).Description}}
																{%endif%}
															</td>
														</tr>
														<tr>
															<td><b>&ensp;&ensp;Place Of Commune</b></td>
															<td>
																{%if CommuneObj.get(ProvidedObj.PCPLB.get('PCPLBCM', '')) %}
																	{{CommuneObj.get(ProvidedObj.PCPLB.get('PCPLBCM', '')).Description}}
																{%endif%}
															</td>
															<td>
																{%if CommuneObj.get(AvailableObj.ACPLB.get('ACPLBCM', '')) %}
																	{{CommuneObj.get(AvailableObj.ACPLB.get('ACPLBCM', '')).Description}}
																{%endif%}
															</td>
														</tr>
														<tr>
															<td><b>Gender</b></td>
															<td>{{formatGender(ProvidedObj.PCGND,Vlookup=True)}}</td>
															<td>{{formatGender(AvailableObj.ACGND,Vlookup=True)}}</td>
														</tr>
														<tr>
															<td><b>Marital Status</b></td>
															<td>{{formatMaritalStatus(ProvidedObj.PCMAR,Vlookup=True)}}</td>
															<td>{{formatMaritalStatus(AvailableObj.ACMAR,Vlookup=True)}}</td>
														</tr>

														<tr>
															<td><b>Nationaltity</b></td>
															<td>{{formatNationality(ProvidedObj.PCNAT)}}</td>
															<td>{{formatNationality(AvailableObj.ACNAT)}}</td>
														</tr>
													{% endif %}
												</tbody>
											
											</table>
										</div>

										<!-- Summary -->
										<div class="col-sm-6" style="padding-right:0px !important;">
											<table  class="table table-striped panel panel-default table-hover" cellspacing="0" width="100%">
												<tbody>
													{% if ConsumerObj.get('SUMMARY', '') %}

														{% set SummaryObj = ConsumerObj.SUMMARY %}

														<tr>
															<td><b>All Provious Enquiries</b></td>
															<td>{{SummaryObj.CNT_PE}}</td>
														</tr>
														<tr>
															<td><b>Enquiries for Previous 30 Days</b></td>
															<td>{{SummaryObj.CNT_MTDE}}</td>
														</tr>
														<tr>
															<td><b>Earliest Loan Issue Date</b></td>
															{% if SummaryObj.EISDT %}
																<td>{{SummaryObj.EISDT}}</td>
															{% else %}
																<td></td>
															{% endif %}
														</tr>
														<tr>
															<td><b>Total Accounts</b></td>
															<td>{{SummaryObj.CNT_ACC}}</td>
														</tr>
														<tr>
															<td><b>&ensp;&ensp;Normal Accounts</b></td>
															<td>{{SummaryObj.get('CNT_ACC_NORM', '')}}</td>
														</tr>
														<tr>
															<td><b>&ensp;&ensp;Delinquent Accounts</b></td>
															<td>{{SummaryObj.get('CNT_ACC_DELQ', '')}}</td>
														</tr>
														<tr>
															<td><b>&ensp;&ensp;Closed Accounts</b></td>
															<td>{{SummaryObj.get('CNT_ACC_CLO', '')}}</td>
														</tr>
														<tr>
															<td><b>&ensp;&ensp;Reject Accounts</b></td>
															<td>{{SummaryObj.get('CNT_ACC_REJ', '')}}</td>
														</tr>
														<tr>
															<td><b>&ensp;&ensp;Write Off Accounts</b></td>
															<td>{{SummaryObj.get('CNT_ACC_WRO', '')}}</td>
														</tr>
														<tr>
															<td><b>Total Limits</b></td>
															<td>
																{% if SummaryObj.get('TOT_LIMITS', '') %}
																	{%for row in makeList(SummaryObj.TOT_LIMITS)%}
																		{{row.TOT_LIM_CURR}} {{formatNumber(float(row.TOT_LIM),1,0)}} </br>
																	{%endfor%}
																{% endif %}
															</td>
														</tr>
														<tr>
															<td><b>Total Liabilities</b></td>
															<td>
																{% if SummaryObj.get('TOT_LIABILITIES', '') %}
																	{%for row in makeList(SummaryObj.TOT_LIABILITIES)%}
																		{{row.TOT_LIAB_CURR}} {{formatNumber(float(row.TOT_LIAB),1,0)}} </br>
																	{%endfor%}
																{% endif %}
															</td>
														</tr>
														<tr>
															<td><b>Total Write Off Amounts</b></td>
															<td>
																{% if SummaryObj.get('TOT_WO_AMT', '') %}
																	{%for row in makeList(SummaryObj.TOT_WO_AMT)%}
																		{{row.TOT_WO_CURR}} {{formatNumber(float(row.TOT_WO),1,0)}} </br>
																	{%endfor%}
																{% endif %}
															</td>
														</tr>
														<tr>
															<td><b>&ensp;&ensp;Outstanding Write Off Balance</b></td>
															<td>
																{% if SummaryObj.get('TOT_WO_OS_BALANCE', '') %}
																	{%for row in makeList(SummaryObj.TOT_WO_OS_BALANCE)%}
																		{{row.TOT_WO_OS_CURR}} {{formatNumber(float(row.TOT_WO_OS_BAL),1,0)}} </br>
																	{%endfor%}
																{% endif %}
															</td>
														</tr>

														<!-- Guaranteed Accounts -->
														<tr>
															<td><b>Guaranteed Accounts</b></td>
															<td>{{SummaryObj.CNT_GACC}}</td>
														</tr>
														<tr>
															<td><b>&ensp;&ensp;Normal Accounts</b></td>
															<td>{{SummaryObj.get('CNT_GACC_NORM', '')}}</td>
														</tr>
														<tr>
															<td><b>&ensp;&ensp;Delinquent Accounts</b></td>
															<td>{{SummaryObj.get('CNT_GACC_DELQ', '')}}</td>
														</tr>
														<tr>
															<td><b>&ensp;&ensp;Closed Accounts</b></td>
															<td>{{SummaryObj.get('CNT_GACC_ACC_CLO', '')}}</td>
														</tr>
														<tr>
															<td><b>&ensp;&ensp;Reject Accounts</b></td>
															<td>{{SummaryObj.get('CNT_GACC_REJ', '')}}</td>
														</tr>
														<tr>
															<td><b>&ensp;&ensp;Write Off Accounts</b></td>
															<td>{{SummaryObj.get('CNT_GACC_WRO', '')}}</td>
														</tr>
														<tr>
															<td><b>Total Guaranteed Limits</b></td>
															<td>
																{% if SummaryObj.get('TOT_GLIMITS', '') %}
																	{%for row in makeList(SummaryObj.TOT_GLIMITS)%}
																		{{row.TOT_GLIM_CURR}} {{formatNumber(float(row.TOT_GLIM),1,0)}}</br>
																	{%endfor%}
																{% endif %}
															</td>
														</tr>
														<tr>
															<td><b>Total Guaranteed Liabilities</b></td>
															<td>
																{% if SummaryObj.get('TOT_GLIABILITIES', '') %}
																	{%for row in makeList(SummaryObj.TOT_GLIABILITIES)%}
																		{{row.TOT_GLIAB_CURR}} {{formatNumber(float(row.TOT_GLIAB),1,0)}}</br>
																	{%endfor%}
																{% endif %}
															</td>
														</tr>
														<tr>
															<td><b>Total Guaranteed Write Off Amounts</b></td>
															<td>
																{% if SummaryObj.get('TOT_GWO_AMT', '') %}
																	{%for row in makeList(SummaryObj.TOT_GWO_AMT)%}
																		{{row.TOT_GWO_CURR}} {{formatNumber(float(row.TOT_GWO),1,0)}}</br>
																	{%endfor%}
																{% endif %}
															</td>
														</tr>
														<tr>
															<td><b>Outstanding Guaranteed Write Off Balance</b></td>
															<td>
																{% if SummaryObj.get('TOT_GWO_OS_BALANCE', '') %}
																	{%for row in makeList(SummaryObj.TOT_GWO_OS_BALANCE)%}
																		{{row.TOT_GWO_OS_CURR}} {{formatNumber(float(row.TOT_GWO_OS_BAL),1,0)}}</br>
																	{%endfor%}
																{% endif %}
															</td>
														</tr>
													{% endif %}
												</tbody>
												
											</table>
										</div>
									</div>

									<!-- Additional IDs -->
								
									<div class="col-sm-12">
										<h3 class="title text-left">Additional IDs </h3>
										<table  class="table table-striped panel panel-default table-hover" cellspacing="0" width="100%">
												<tbody>
													<tr>
														<td><b>Date Loaded</b></td>
														<td><b>ID Type</b></td>
														<td><b>ID Number</b></td>
														<td><b>Expiry Date</b></td>
													</tr>

													{% set AddIDObj = ConsumerObj.get('ADDITIONAL_IDS', '') %}

													{%if AddIDObj %}

														{%for row in makeList(AddIDObj.ADDITIONAL_ID) %}
															<tr>
																<td>{{row.AID_LOADDT}}</td>
																<td>{{row.AID_CID1}}</td>
																<td>{{row.AID_CID2}} </td>
																<td>{{row.AID_CID3}}</td>
															</tr>
														{%endfor%}

													{%else%}
														<tr>
															<td colspan="4">No record found.</td>
														</tr>
													{%endif%}
													
												</tbody>
										</table>
									</div>
									
									<!-- Additional Names -->
									<div class="col-sm-12">
										<h3 class="title text-left">Additional Names </h3>
										<table  class="table table-striped panel panel-default table-hover" cellspacing="0" width="100%">
												<tbody>
													<tr>
														<td><b>Date Loaded</b></td>
														<td><b>Khmer Name</b></td>
														<td><b>English Name</b></td>
													</tr>

													{% set AddNameObj = ConsumerObj.get('ADDITIONAL_NAMES', '') %}

													{%if AddNameObj %}

														{% for row in makeList(AddNameObj.ADDITIONAL_NAME) %}
															<tr>
																<td>{{row.ANM_LOAD_DT}}</td>
																<td>{{ row.get('ANM_CNMFA', '') }} {{row.get('ANM_CNM1A', '')}} {{row.get('ANM_CNM7A', '')}}</td>
																<td>{{ row.get('ANM_CNMFE', '') }} {{row.get('ANM_CNM1E', '')}} {{row.get('ANM_CNM7E', '')}}</td>
															</tr>
														{% endfor %}

													{%else%}
														<tr>
															<td colspan="3">No record found.</td>
														</tr>
													{%endif%}
													
												</tbody>
										</table>
									</div>

									<!-- Previous Enquiries -->
									<div class="col-sm-12">
										<h3 class="title text-left">Previous Enquiries</h3>
										<table  class="table table-striped panel panel-default table-hover" cellspacing="0" width="100%">
												<tbody>
													<tr>
														<td><b>Date</b></td>
														<td><b>Enquirer</b></td>
														<td><b>Enquiry Type</b></td>
														<td><b>Account Type</b></td>
														<td><b>Member Reference</b></td>
														<td><b>Product</b></td>
														<td><b>Currency</b></td>
														<td><b>Amount</b></td>
														<td><b>Applicant Type</b></td>
														<td><b>Name</b></td>
													</tr>

													{% set PrevEnqObj = ConsumerObj.get('PREV_ENQUIRIES', '') %}

													{%if PrevEnqObj %}

														{%for row in makeList(PrevEnqObj.PREV_ENQUIRY) %}
															<tr>
																<td>{{row.PE_DATE}}</td>
																<td>{{row.PE_ENQR}}</td>
																<td>{{getEnquiryType(row.PE_TYPE)}} </td>
																<td>{{ getAccountType(row.get('PE_ACCT', ''),Vlookup=True) }}</td>
																<td>{{row.PE_MEMB_REF}}</td>
																<td>{{getProductTypeCBC(row.PE_PRD,Vlookup=True)}}</td>
																<td>{{row.get('PE_CURR', '')}}</td>
																{% if row.get('PE_AMOUNT', '') %}
																	<td>{{formatNumber(float(row.PE_AMOUNT),1,0)}}</td>
																{% else %}
																	<td></td>
																{% endif %}
																<td>
																	{% if row.get('PE_APPL', '') %}
																		{{formatApplicantType(row.PE_APPL,Vlookup=True)}}
																	{% endif %}
																</td>
																<td>{{ row.PE_NAME.get('PE_NMFE', '') }} {{ row.PE_NAME.get('PE_NM1E', '') }} <br/>
																	{{ row.PE_NAME.get('PE_NMFA', '') }} {{ row.PE_NAME.get('PE_NM1A', '') }}
																</td>
															</tr>
														{%endfor%}

													{%else%}
														<tr>
															<td colspan="8">No record found.</td>
														</tr>
													{%endif%}

												</tbody>
										</table>
									</div>

									<!-- Account Details -->
									<div class="col-sm-12">
										<h3 class="title text-left">Account Details</h3>

										{% set AccDeObj = ConsumerObj.get('ACC_DETAILS', '') %}

										{%if AccDeObj %}

											{%for row in makeList(AccDeObj.ACC_DETAIL) %}

												<div class="col-sm-6" style="padding-left:0px !important;">
													<table  class="table table-striped panel panel-default table-hover" cellspacing="0" width="100%">
															<tbody>
																<tr>
																	<td width="35%"><b>Creditor {{loop.index}}</b></td>
																	<td>{{row.ACC_CRDTR}}</td>
																</tr>
																<tr>
																	<td><b>Product Type</b></td>
																	<td>{{getProductTypeCBC(row.ACC_PRD,Vlookup=True)}}</td>
																</tr>
																<tr>
																	<td><b>Applicant Type</b></td>
																	<td>{{formatApplicantType(row.ACC_CAPL,Vlookup=True)}}</td>
																</tr>
																<tr>
																	<td><b>Account Number</b></td>
																	<td>{{row.get('ACC_ACC_NO', '')}}</td>
																</tr>
																<tr>
																	<td><b>Group Ref</b></td>
																	<td>{{row.get('ACC_GRP_REF', '') }}</td>
																</tr>
																<tr>
																	<td><b>Currency</b></td>
																	<td>{{row.ACC_CURR}}</td>
																</tr>
																<tr>
																	<td><b>Limit</b></td>
																	<td>{{formatNumber(float(row.ACC_LIMIT),1,0)}}</td>
																</tr>
																<tr>
																	<td><b>Restructured Loan</b></td>
																	<td>{{row.ACC_RST_LOAN}}</td>
																</tr>
																<tr>
																	<td><b>Tenure</b></td>
																	<td>{{row.get('ACC_TNR', '') }}</td>
																</tr>
																<tr>
																	<td><b>Installment Amount</b></td>
																	{% if row.get('ACC_INSTL', '') %}
																		<td>{{formatNumber(float(row.ACC_INSTL),1,0)}}</td>
																	{% else %}
																		<td></td>
																	{% endif %}
																</tr>
																<tr>
																	<td><b>Security Type</b></td>
																	{% if row.get('ACC_SEC', '') %}
																		<td>{{getSecurityType(row.ACC_SEC)}}</td>
																	{% else%}
																		<td></td>
																	{% endif %}
																</tr>
																<tr>
																	<td><b>Outstanding Balance</b></td>
																	<td>{{formatNumber(float(row.ACC_CUB),1,0)}}</td>
																</tr>
																
															</tbody>
													</table>
												</div>
												<div class="col-sm-6" style="padding-right:0px !important;">
													<table  class="table table-striped panel panel-default" cellspacing="0" width="100%">
															<tbody>
																
																<tr>
																	<td width="35%"><b>Issue Date</b></td>
																	<td>{{row.ACC_ISSU_DT}}</td>
																</tr>
																<tr>
																	<td><b>Expiry Date</b></td>
																	<td>{{row.ACC_PROD_EXP_DT}}</td>
																</tr>
																<tr>
																	<td><b>Closed Date</b></td>
																	<td>{{row.ACC_CLSD_DT}}</td>
																</tr>
																<tr>
																	<td><b>Status</b></td>
																	<td>{{getPaymentStatus(row.ACC_STATUS,Vlookup=True)}}</td>
																</tr>
																<tr>
																	<td><b>Payment Frequency</b></td>
																	<td>{{getPaymentFrequency(row.ACC_FRQ)}}</td>
																</tr>
																<tr>
																	<td><b>Last Amount Paid</b></td>
																	{% if row.get('ACC_LAST_AMT_PD', '') %}
																		<td>{{formatNumber(float(row.ACC_LAST_AMT_PD),1,0)}}</td>
																	{% else %}
																		<td></td>
																	{% endif %}
																</tr>
																<tr>
																	<td><b>Last Payment Date</b></td>
																	<td>{{row.get('ACC_LAST_PAY_DT', '')}}</td>
																</tr>
																<tr>
																	<td><b>Past Due</b></td>
																	{% if row.get('ACC_ODB', '') %}
																		<td>{{formatNumber(float(row.ACC_ODB),1,0)}}</td>
																	{% else %}
																		<td></td>
																	{% endif %}
																</tr>
																<tr>
																	<td><b>Next Payment Date</b></td>
																	<td>{{row.get('ACC_NXT_DU_DT', '') }}</td>
																</tr>
																<tr>
																	<td><b>As Of Date</b></td>
																	<td>{{row.ACC_AS_OF_DT}}</td>
																</tr>
																<tr>
																	<td><b>Last 24 Cycles</b></td>
																	<td>{{row.ACC_SUMMRY}}</td>
																</tr>
																<tr>
																	<td><b>Advisory Message</b></td>
																	<td>{{row.ACC_ADV_MSG}}</td>
																</tr>
															</tbody>
													</table>
												</div>

											{%endfor%}

										{%else%}
											<table  class="table table-striped panel panel-default" cellspacing="0" width="100%">
												<tbody>
													<tr>
														<td>No record found.</td>
													</tr>
												</tbody>
											</table>
										{%endif%}
									</div>


									<!-- Guaranteed Account Details -->
									<div class="col-sm-12">
										<h3 class="title text-left">Guaranteed Account Details</h3>

										{% set GuaranterAccount = ConsumerObj.get('GUARANTEED_ACCOUNTS', '') %}

										{%if GuaranterAccount %}
											{%for row in makeList(GuaranterAccount.GRT_ACC_DETAIL) %}
												<div class="col-sm-6" style="padding-left:0px !important;">
													<table  class="table table-striped panel panel-default table-hover" cellspacing="0" width="100%">
															<tbody>
																<tr>
																	<td width="35%"><b>Creditor {{loop.index}}</b></td>
																	<td>{{row.GRT_CRDTR}}</td>
																</tr>
																<tr>
																	<td><b>Product Type</b></td>
																	<td>{{getProductTypeCBC(row.GRT_PRD,Vlookup=True)}}</td>
																</tr>
																<tr>
																	<td><b>Account Number</b></td>
																	<td>{{row.get('GRT_ACC_NO', '')}}</td>
																</tr>
																<tr>
																	<td><b>Group Ref</b></td>
																	<td>{{row.get('GRT_GRP_REF', '') }}</td>
																</tr>
																<tr>
																	<td><b>Currency</b></td>
																	<td>{{row.GRT_CURR}}</td>
																</tr>
																<tr>
																	<td><b>Limit</b></td>
																	<td>{{formatNumber(float(row.GRT_LIMIT),1,0)}}</td>
																</tr>
																<tr>
																	<td><b>Restructured Loan</b></td>
																	<td>{{row.GRT_RST_LOAN}}</td>
																</tr>
																<tr>
																	<td><b>Tenure</b></td>
																	<td>{{row.get('GRT_TNR', '') }}</td>
																</tr>
																<tr>
																	<td><b>Installment Amount</b></td>
																		{% if row.get('GRT_INSTL', '') %}
																			<td>{{formatNumber(float(row.GRT_INSTL),1,0)}}</td>
																		{% else %}
																			<td></td>
																		{% endif %}
																</tr>
																<tr>
																	<td><b>Security Type</b></td>
																		{% if row.get('GRT_SEC', '') %}
																			<td>{{getSecurityType(row.GRT_SEC)}}</td>
																		{% else%}
																			<td></td>
																		{% endif %}
																</tr>
																<tr>
																	<td><b>Outstanding Balance</b></td>
																	<td>{{formatNumber(float(row.GRT_CUB),1,0)}}</td>
																</tr>
																<tr>
																	<td><b>Advisory Message</b></td>
																	<td>{{row.GRT_ADV_MSG}}</td>
																</tr>
															</tbody>
													</table>
												</div>
												<div class="col-sm-6" style="padding-right:0px !important;">
													<table  class="table table-striped panel panel-default" cellspacing="0" width="100%">
															<tbody>
																
																<tr>
																	<td width="35%"><b>Issue Date</b></td>
																	<td>{{row.GRT_ISSU_DT}}</td>
																</tr>
																<tr>
																	<td><b>Expiry Date</b></td>
																	<td>{{row.GRT_PROD_EXP_DT}}</td>
																</tr>
																<tr>
																	<td><b>Closed Date</b></td>
																	<td>{{row.GRT_CLSD_DT}}</td>
																</tr>
																<tr>
																	<td><b>Status</b></td>
																	<td>{{getPaymentStatus(row.GRT_STATUS,Vlookup=True)}}</td>
																</tr>
																<tr>
																	<td><b>Payment Frequency</b></td>
																	<td>{{getPaymentFrequency(row.GRT_FRQ)}}</td>
																</tr>
																<tr>
																	<td><b>Last Amount Paid</b></td>
																		{% if row.get('GRT_LAST_AMT_PD', '') %}
																			<td>{{formatNumber(float(row.GRT_LAST_AMT_PD),1,0)}}</td>
																		{% else %}
																			<td></td>
																		{% endif %}
																</tr>
																<tr>
																	<td><b>Last Payment Date</b></td>
																	<td>{{row.get('GRT_LAST_PAY_DT', '')}}</td>
																</tr>
																<tr>
																	<td><b>Past Due</b></td>
																		{% if row.get('GRT_ODB', '') %}
																			<td>{{formatNumber(float(row.GRT_ODB),1,0)}}</td>
																		{% else %}
																			<td></td>
																		{% endif %}
																</tr>
																<tr>
																	<td><b>Next Payment Date</b></td>
																	<td>{{row.get('GRT_NXT_DU_DT', '') }}</td>
																</tr>
																<tr>
																	<td><b>As Of Date</b></td>
																	<td>{{row.GRT_AS_OF_DT}}</td>
																</tr>
																<tr>
																	<td><b>Last 24 Cycles</b></td>
																	<td>{{row.GRT_SUMMRY}}</td>
																</tr>
																<tr>
																	<td>&nbsp;</td>
																	<td>&nbsp;</td>
																</tr>
															</tbody>
													</table>
												</div>
											{%endfor%}

										{%else%}
											<table  class="table table-striped panel panel-default" cellspacing="0" width="100%">
												<tbody>
													<tr>
														<td>No record found.</td>
													</tr>
												</tbody>
											</table>
										{%endif%}
									</div>


									<!-- Advisory Message -->
									<div class="col-sm-12">
										<h3 class="title text-left">Advisory Message</h3>
										<table  class="table table-striped panel panel-default" cellspacing="0" width="100%">
												<tbody>
													<tr>
														{% set AdvText = ConsumerObj.get("ADVISORY_SUMMARY_TEXT",{}).get("ADVISORY_TEXT",{}) %}
														{% if AdvText == 'NOADV' %}
															<td>No adverse information could be found on the subject.</td>
														{% else %}
															<td>{{ AdvText }}</td>
														{% endif %}
													</tr>
												</tbody>
										</table>
									</div>

									<!-- Addresses -->
									<div class="col-sm-12">
										<h3 class="title text-left">Addresses</h3>

										{% set AddressObj = ConsumerObj.get('ADDRESSES', '') %}

										{% if AddressObj %}

											{%for row in makeList(AddressObj.ADDRESS) %}

												<div class="col-sm-6" style="padding-left:0px !important;">
													<table  class="table table-striped panel panel-default table-hover" cellspacing="0" width="100%">
															<tbody>

																<tr>
																	<td width="35%"><b>Address Type {{loop.index}}</b></td>
																	<td>{{getAddressType(row.CA_CADT)}}</td>
																</tr>

																<tr>
																	<td><b>Province</b></td>
																	<td>
																		{%if ProvinceObj.get(row.get('CA_PROV',''))%}
																			{{ProvinceObj.get(row.get('CA_PROV','')).Description}}
																		{%else%}
																			{{row.get('CA_PROV','')}}
																		{%endif%}

																	</td>
																</tr>

																<tr>
																	<td><b>Commune</b></td>
																	<td>
																		{%if CommuneObj.get(row.get('CA_COMM', ''))%}
																			{{CommuneObj.get(row.get('CA_COMM', '')).Description}}
																		{%else%}
																			{{row.get('CA_COMM', '')}}
																		{%endif%}

																	</td>
																</tr>

																<tr>
																	<td><b>Village­-Other English</b></td>
																	<td>{{row.get('CA_CAD2E', '')}}</td>
																</tr>

																<tr>
																	<td><b>Street English</b></td>
																	<td>{{row.get('CA_STREET', '')}}</td>
																</tr>

																<tr>
																	<td width="35%"><b>Address Line 1 English</b></td>
																	<td>{{row.get('CA_CAD1E', '')}}</td>
																</tr>

																<tr>
																	<td><b>Postal Code</b></td>
																	<td>{{row.get('CA_CAD7', '')}}</td>
																</tr>

																<tr>
																	<td><b>Date Loaded</b></td>
																	<td>{{row.get('CA_LOAD_DT', '')}}</td>
																</tr>

															</tbody>
													</table>
												</div>

												<div class="col-sm-6" style="padding-right:0px !important;">
													<table  class="table table-striped panel panel-default table-hover" cellspacing="0" width="100%">
															<tbody>

																<tr>
																	<td><b>Country</b></td>
																	<td>{{getCountryDescription(row.CA_CAD9)}}</td>
																</tr>

																<tr>
																	<td><b>District</b></td>
																	<td>
																		{%if DistrictObj.get(row.get('CA_DIST', ''))%}
																			{{DistrictObj.get(row.get('CA_DIST', '')).Description}}
																		{%else%}
																			{{row.get('CA_DIST', '')}}
																		{%endif%}

																	</td>
																</tr>

																<tr>
																	<td><b>Village</b></td>
																	<td>
																		{%if VillageObj.get(row.get('CA_VILL', ''))%}
																			{{VillageObj.get(row.get('CA_VILL', '')).Description}}
																		{%else%}
																			{{row.get('CA_VILL', '')}}
																		{%endif%}
																	</td>
																</tr>

																<tr>
																	<td><b>Village­-Other Khmer</b></td>
																	<td>{{row.get('CA_CAD2A', '')}}</td>
																</tr>

																<tr>
																	<td><b>House English</b></td>
																	<td>{{row.get('CA_HOUSE', '')}}</td>
																</tr>

																<tr>
																	<td width="35%"><b>Address Line 1 Khmer</b></td>
																	<td>{{ row.get('CA_CAD1A', '') }}</td>
																</tr>

																<tr>
																	<td><b>City English</b></td>
																	<td>
																		{% set NewProvince = formatProvince(row.get('CA_CAD8E', '')) %}
																		{%if ProvinceObj.get(NewProvince)%}
																			{{ProvinceObj.get(NewProvince).Description}}
																		{%else%}
																			{{row.get('CA_CAD8E', '')}}
																		{%endif%}
																	</td>
																</tr>

																<tr>
																	<td><b>City Khmer</b></td>
																	<td>
																		{{row.get('CA_CAD8A', '')}}
																	</td>
																</tr>

															</tbody>
													</table>
												</div>

											{% endfor %}


										{% endif %}

									</div>

									<!-- Occupation and Employment Details -->

									{% set EmpObj = ConsumerObj.get('EMPLOYERS', '') %}
									<div class="col-sm-12">
										<h3 class="title text-left">Occupation and Employment Details</h3>

										{%for row in makeList(EmpObj.EMPLOYER) %}
											<div class="col-sm-6" style="padding-left:0px !important;">
												<table  class="table table-striped panel panel-default table-hover" cellspacing="0" width="100%">
														<tbody>
															<tr>
																<td width="35%"><b>Type</b></td>
																<td>{{getEmployerType(row.ETYP,Vlookup=True)}}</td>
															</tr>
															<tr>
																<td><b>Occupation</b></td>
																<td>{{row.get('EOCA', '')}} {{row.get('EOCE', '')}}</td>
															</tr>
															<tr>
																<td><b>Length of Service(M)</b></td>
																<td>{{row.ELEN}}</td>
															</tr>
															
															<tr>
																<td><b>Date Loaded</b></td>
																<td>{{row.EDLD}}</td>
															</tr>
														</tbody>
												</table>
											</div>
											<div class="col-sm-6" style="padding-right:0px !important;">
												<table  class="table table-striped panel panel-default table-hover" cellspacing="0" width="100%">
														<tbody>

															<tr>
																<td><b>Employer</b></td>
																<td>{{row.get('ENME', '')}} {{row.get('ENMA', '')}}</td>
															</tr>
															<tr>
																<td width="35%"><b>Self Employed</b></td>
																<td>{{getSelfEmployed(row.ESLF)}}</td>
															</tr>
															<tr>
																<td><b>Total Monthly Salary/Income</b></td>
																<td>{{formatNumber(float(row.ETMS),1,0)}}</td>
															</tr>
															<tr>
																<td><b>Currency</b></td>
																<td>{{row.ECURR}}</td>
															</tr>

														</tbody>
												</table>
											</div>
										{%endfor%}

									</div>

									<!-- Employer Address -->
									<div class="col-sm-12">
										<h3 class="title text-left">Employer Address</h3>

										{%for row in makeList(EmpObj.EMPLOYER) if row.get('EADR', '') %}
											<div class="col-sm-6" style="padding-left:0px !important;">
												<table  class="table table-striped panel panel-default table-hover" cellspacing="0" width="100%">
														<tbody>

															<tr>
																<td width="35%"><b>Address Type {{loop.index}}</b></td>
																<td>{{getAddressType(row.EADR.EA_CADT)}}</td>
															</tr>

															<tr>
																<td><b>Province</b></td>
																<td>
																	{% if row.EADR.get('EA_PROV', '') %}
																		{%if ProvinceObj.get(row.EADR.EA_PROV)%}
																			{{ProvinceObj.get(row.EADR.EA_PROV).Description}}
																		{%else%}
																			{{row.EADR.EA_PROV}}
																		{%endif%}
																	{% endif %}
																</td>
															</tr>

															<tr>
																<td><b>Commune</b></td>
																<td>
																	{% if row.EADR.get('EA_COMM', '') %}
																		{%if CommuneObj.get(row.EADR.EA_COMM)%}
																			{{CommuneObj.get(row.EADR.EA_COMM).Description}}
																		{%else%}
																			{{row.EADR.EA_COMM}}
																		{%endif%}
																	{% endif %}
																</td>
															</tr>

															<tr>
																<td><b>Village­-Other English</b></td>
																<td>{{row.EADR.get('EA_AD2E', '') }}</td>
															</tr>

															<tr>
																<td><b>Street English</b></td>
																<td>{{row.EADR.get('EA_STREET', '') }}</td>
															</tr>

															<tr>
																<td width="35%"><b>Address Line 1 English</b></td>
																<td>{{row.EADR.get('EA_AD1E', '') }}</td>
															</tr>

															<tr>
																<td><b>Postal Code</b></td>
																<td>{{row.EADR.get('EA_ADR7', '') }}</td>
															</tr>

															<tr>
																<td>&nbsp;</td>
																<td></td>
															</tr>

														</tbody>
												</table>
											</div>

											<div class="col-sm-6" style="padding-right:0px !important;">
												<table  class="table table-striped panel panel-default table-hover" cellspacing="0" width="100%">
														<tbody>

															<tr>
																<td><b>Country</b></td>
																<td>{{getCountryDescription(row.EADR.EA_AD9)}}</td>
															</tr>

															<tr>
																<td><b>District</b></td>
																<td>
																	{% if row.EADR.get('EA_DIST', '') %}
																		{%if DistrictObj.get(row.EADR.EA_DIST)%}
																			{{DistrictObj.get(row.EADR.EA_DIST).Description}}
																		{%else%}
																			{{row.EADR.EA_DIST}}
																		{%endif%}
																	{% endif %}
																</td>
															</tr>

															<tr>
																<td><b>Village</b></td>
																<td>
																	{%if VillageObj.get(row.EADR.get('EA_VILL', ''))%}
																		{{VillageObj.get(row.EADR.get('EA_VILL', '')).Description}}
																	{%endif%}
																</td>
															</tr>

															<tr>
																<td><b>Village­-Other Khmer</b></td>
																<td>{{row.EADR.get('EA_AD2A', '') }}</td>
															</tr>

															<tr>
																<td width="35%"><b>Address Line 1 Khmer</b></td>
																<td>{{ row.EADR.get('EA_AD1A', '') }}</td>
															</tr>

															<tr>
																<td><b>House</b></td>
																<td>{{row.EADR.get('EA_HOUSE', '') }}</td>
															</tr>

															<tr>
																<td><b>City English</b></td>
																<td>
																	{% set NewProvince = formatProvince(row.EADR.get('EA_AD8E', '')) %}
																	{%if ProvinceObj.get(NewProvince)%}
																		{{ProvinceObj.get(NewProvince).Description}}
																	{%else%}
																		{{row.EADR.get('EA_AD8E', '')}}
																	{%endif%}
																</td>
															</tr>

															<tr>
																<td><b>City Khmer</b></td>
																<td>
																	{{row.EADR.get('EA_AD8A', '')}}
																</td>
															</tr>

														</tbody>
												</table>
											</div>
										{%endfor%}

									</div>

								{% endfor %}

							{% endif%}
							
						{% endif%}
							<!-- Disclaimer -->
							<div class="col-sm-12">
								<h3 class="title text-left">Disclaimer</h3>
								<table class="table panel panel-default" cellspacing="0" width="100%">
										<tbody>
											<tr>
												<td>{{ ReportObj.DISCLAIMER.DI_TEXT }}</td>
											</tr>
										</tbody>
								</table>
							</div>
							<div class="col-sm-12">
								<p class="text-center">This report is generated by <b>Morakot VB</b>.</p>
							</div>
						</div>

						<!-- Page break -->
						<div style="page-break-after: always;">&nbsp;</div>

					{# Status == ERROR #}
					{% elif ResponseObj.RESPONSE.STATUS == "ERROR" %}

						<div class="col-sm-12">
							<div class="clearfix"></div>
							<div class="alert alert-warning" id="alert-warning">
									<button type="button" class="close" data-dismiss="alert">&times;</button>
									<ol>
										{% for ErrorItem in makeList(ResponseObj.RESPONSE.MESSAGE.ITEM) %}
											{% for Error in makeList(ErrorItem.ERROR) %}
											<li id="lblTableName">
												<p>Field: {{Error.FIELD}}</p>
												<p>Message: {{Error.RSP_MSG}}</p>
												<p>Data: {{Error.DATA}}</p>
											</li>
											{% endfor %}
										{% endfor %}
									</ol>
								</div>
							</div>
						</div>

					{# Status == PARSER #}
					{% else %}

						{% set ParserObj = ResponseObj.RESPONSE.MESSAGE.PARSER %}
						<div class="col-sm-12">
							<div class="clearfix"></div>
							<div class="alert alert-warning" id="alert-warning">
									<button type="button" class="close" data-dismiss="alert">&times;</button>
									<ol>
										<li id="lblTableName">
											<p>Message: {{ParserObj.RSP_MSG}}</p>
											<p>Request Data: {{ParserObj.REQ_DATA}}</p>
										</li>
									</ol>
								</div>
							</div>
						</div>

					{%endif%}

				{% endif %}
			{% endif %}
		{% endfor %}

	{% endif %}

{%endif%}

{% endblock %}

{% block js %}


{% from "print.html" import exportIncludeJS %}
{{exportIncludeJS()}}

<script type="text/javascript">

	$(document).ready(function() {
		// $('#mktlist').dataTable({
		// 	"lengthMenu": [[25,50,100,200, -1], [25,50,100,200, "All"]],
		// 	"aaSorting":[]
		// });
		{% from "print.html" import exportTable %}
		{#{exportTable("#mktlist","Enquiry Reports ")}#}
		$( "#print").click(function() {

			$('#exportButton').hide();
			$('.ActionHeader').hide();
			$('.ActionFotter').hide();
			$('.alert').hide();
			$('.submit-form').hide();
			// document.body.style.fontSize = "0.9em";
			// old_title = document.title;
			// document.title = $('#member_ref').text().replace(/\s/g, '').replace(':', '');
			window.print();
			// document.title = old_title;

			// window.location.reload(true);
			$('.submit-form').show();

		});
		$('#btnShow').on('click', function(event){
			fn_fadeIn();
		});
	});	
</script>
{% endblock %}