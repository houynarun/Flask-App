from app.mktcore.wtfimports    import *
from app.Account.account_dd    import *
from app.Account.models        import *
import app.tools.user 				as mktuser


@app.route("/Morakot/AccountDDEx/AccountNumber", methods=["GET"])
def getMaskingID():
	AccountNumber = request.args.get('ID')
	Branch 		= mktuser.getCurrentBranch()
	return jsonify(AccountNumber='%s%s'%(Branch,AccountNumber))


class FRM_ACCOUNT_DD_EX(FRM_ACCOUNT_DD):

	AccountNumber = TextField("Account Number",
						  # default=lambda : getMaskingID
						  )

	@staticmethod
	def listField():

		Fields = ["ID", "CustomerList", "AccName", "Currency", "AccCategory",
				  "OpenDate","AccStatus" ,"ClosingDate","Balance", "AvailableBal"]
		# return Fields
		return Fields, ["AccProduct*LK*101"]


	@staticmethod
	def hotField():

		SuperHotField = super(FRM_ACCOUNT_DD_EX,FRM_ACCOUNT_DD_EX).hotField()
		hotfield = []
		fielddisplay = "$('#AccountNumber').val(data.AccountNumber);"
		varname = "ID:$('#ID').val()"
		fun = ['CustomerList', varname, fielddisplay, "/Morakot/AccountDDEx/AccountNumber", "click"]
		hotfield.append(fun)
		SuperHotField.extend(hotfield)
		return SuperHotField