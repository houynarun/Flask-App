from app.mktcore.wtfimports    		import *
from app.Collateral.detail    		import *
from app.Collateral.models        	import *


class FRM_COLLATERAL_DE_EX(FRM_COLLATERAL_DE):

	CollateralID 	= 	QuerySelectField(requiredlabel(getLanguage("Collateral"), "*"),
							query_factory=loadCollateral,
							get_label=lambda a: a.ID + " - " + a.Description,
							allow_blank=True,
							blank_text=u'--%s--' %getLanguage("None"),
							validators=[validators.Required()]
						)

	CollateralType 	= 	QuerySelectField(requiredlabel(getLanguage("Collateral Type"), "*"),
							query_factory=loadCollateralType,
							get_label=u'Description',
							allow_blank=True,
							blank_text=u'--%s--' %getLanguage("None"),
							validators=[validators.Required()]
						)

	Currency 		= 	QuerySelectField(requiredlabel(getLanguage("Currency"), "*"),
							query_factory=loadCurrency,
							get_label=u'ID',
							allow_blank=True,
							blank_text=u'--%s--' %getLanguage("None"),
							validators=[validators.Required()]
						)

	PurchasePrice 	= 	TextField("Purchased Price (0=N/A)")
	ValuationPrice 	= 	TextField("Market Price")
	Valuer 			= 	TextField(getLanguage("Valuer"), [validators.length(max=50)])
	
	IssuedDate 		= 	DateField(getLanguage("Issued Date"),
							format='%Y-%m-%d',
							default=mktdate.getDateISO(),
							validators=[validators.Optional()]
						)

	IssuedPlace 	= 	TextField(getLanguage("Issued Place"),[validators.length(max=50)])
	IssuedBy 		= 	TextField(getLanguage("Issued By"),[validators.length(max=100)])
	CollateralNumber= 	TextField("Collateral Number", [validators.length(max=25)])

	Province 		= 	QuerySelectField(getLanguage('Province'),
							query_factory=loadProvince, 
							get_label='Description',
							allow_blank=True,
							blank_text=u'--Choose Province--'
						)

	District 		= 	QuerySelectField(getLanguage('District'),
							query_factory=loadDistrict, 
							get_label='Description',
							allow_blank=True,
							blank_text=u'--Choose District--'
						)

	Commune 		=	QuerySelectField(getLanguage('Commune'),
							query_factory=loadCommune, 
							get_label='Description',
							allow_blank=True,
							blank_text=u'--Choose Commune--'
						)

	Village 		=	QuerySelectField(getLanguage('Village'),
							query_factory=loadVillage, 
							get_label='Description',
							allow_blank=True,
							blank_text=u'--Choose Village--'
						)

	ReceivedDate 	= 	DateField(getLanguage("Received Date"),
							format='%Y-%m-%d',
							validators=[validators.Optional()]
						)
	ReceivedBy 		= 	TextField("Received By", [validators.length(max=35)])
	
	WithdrawalDate 	= 	DateField("Released Date",
							format='%Y-%m-%d',
							validators=[validators.Optional()]
						)
	
	WithdrawalBy 	= 	TextField("Released By", [validators.length(max=35)])

	Description 			= 	TextAreaField(getLanguage("Property Description"), [validators.length(max=300)])

	OwnershipType 		=	SelectField('Ownership Type', 
								choices=[('1', 'Owned By Customer'),('2', 'Owned By Other')],
								coerce=str,
								description='1-Ownership')

	OwnerName 			= 	TextField('Owner Name',
								description='1-Ownership')
	OwnerSpouseName 	= 	TextField('Owner Spouse Name',
								description='1-Ownership')
	RelationIndicator 	= 	SelectField("Relation Indicator",
								choices=[('', '--None--'), ('1', 'Spouse'), ('2', 'Son/Daughter'), ('3', 'Relative'), ('4', 'Parent'), ('5', 'Friend')],
								coerce=str,
								default='__None',
								description='1-Ownership'
							)
