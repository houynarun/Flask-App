{% extends "layout.html" %}

{% block css %}
	<style type="text/css">
		body {
			background: white;
		}

		table thead th {
			text-align: center;
		}

		.header1{
			color: #888 !important;
			font-size: 16px;
			font-weight: bold;
			margin: 5px 0 10px;
			padding: 10px 18px 0;
		}

		.header2{
			color: #888 !important;
			font-size: 14px;
			font-weight: normal;
			margin: 5px 0 10px;
			padding: 0px 18px 0;
		}


		.head-line{
			color: #888 !important;
			font-size: 16px;
			font-weight: bold;
			margin: 5px 0 10px;
			padding: 10px 0 5px 0 ;
			text-decoration: underline;
		}

		.modal-dialog {
			width: 350px;
		}
	</style>


{% endblock %}

{% block content %}

<div class="navbar navbar-default navbar-static-top">
	{# <form method="GET" id="frm" name="frm" role="form">
		<div class="col-sm-6">
			<div style="margin-top: 8px;">
				<div class="col-sm-4" style="padding-left: 0;">
					<input type="text" name="Date" class="form-control" value="{{ Date }}" style="width: 100%;" placeholder="Date * (yyyy-mm-dd)">
				</div>
				<label class="col-sm-1" style="padding:0px;">
					<button type="submit" class="btn btn-flat btn-labeled btn-primary" style="padding: 7px 25px;">
						Show
					</button>
				</label>
			</div>
		</div>
	</form> #}
		<div class="col-sm-6" style="margin-top: 10px;">
			{% from "print.html" import exportButtonLink %}
                {{exportButtonLink()}}
		</div>
		<div class="col-sm-6" style="margin-top: 8px;">
			<div class="pull-right">
				<button type="button" class="btn btn-flat btn-labeled btn-success" data-toggle="modal" data-target="#getCustomRange">
					<span class="btn-label icon fa fa-gear"></span> Custom
				</button>
			</div>
		</div>
</div>

<div class="container">
	<div class="row">
		<div class="col-sm-12">
			<header>
				<center>
					<h1 class="header1" style="text-transform: uppercase;">{{Company}}</h1>
					<h2 class="header2">LOAN EFFECTIVE RATE</h2>
				</center>
				
			</header>

			<section>
				
				<div class="row">
					<div class="col-xs-12">
						<table class="table table-bordered table-hover" id="mktlist">
							<thead>
								<th>No</th>
								<th>ID</th>
								<th>Customer ID</th>
								<th>Khmer Name</th>
								<th>English Name</th>
								<th>Gender</th>
								<th>Account</th>
								<th>Currency</th>
								<th>Disbursed</th>
								<th>Loan Balance</th>
								<th>Outstanding</th>
								<th>Interest Rate</th>
								<th>EIR</th>
							</thead>
							<tbody>
								{% for l in LoanContractObj %}
									<tr>
										<td>{{loop.index}}</td>
										<td>{{l.ID}}</td>
										<td>{{l.CUID}}</td>
										<td>{{l.FirstNameKh}} {{l.LastNameKh}}</td>
										<td>{{l.FirstNameEn}} {{l.LastNameEn}}</td>
										<td>{{l.Gender}}</td>
										<td>{{l.Account}}</td>
										<td>{{l.Currency}}</td>
										<td>{{formatNumber(l.Disbursed)}}</td>
										<td>{{formatNumber(l.Amount)}}</td>
										<td>{{formatNumber(l.OutstandingAmount)}}</td>
										<td>{{l.InterestRate}}</td>
										<td>{{formatNumber(getEIR(l.ID,l.Disbursed))}}</td>
									</tr>
								{% endfor %}
							</tbody>
						</table>
					</div>
						
					

				</div>

				<div class="row">
					<div class="col-xs-4 text-center">Checked by:</div>
					<div class="col-xs-4 text-center">Concurred by:</div>
					<div class="col-xs-4 text-center">Authorized by:</div>
				</div>

			</section>
					
		</div>
	</div>
</div>

<div class="modal fade" id="getCustomRange" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
		<div class="modal-dialog">
			<div class="modal-content">
				<form class="form-horizontal" method="GET">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
						<h4 class="modal-title" id="exampleModalLabel">Custom</h4>
					</div>
					<div class="modal-body">
						<div class="form-group">
							<label for="Branch" class="col-sm-4 control-label">Branch:</label>
							<div class="col-sm-8">
								<input name="Branch" value="{{ Branch }}" class="input-sm form-control" style="width: 100%;">
							</div>
						</div>
						
					</div>
					<div class="modal-footer">
						<button type="submit" class="btn btn-primary" id="Apply">Apply</button>
						<button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
					</div>
				</form>
			</div>
		</div>
	</div>

{% endblock %}

{% block js %}

	{% from "print.html" import exportIncludeJS %}
	{{exportIncludeJS()}}

	<script type="text/javascript">
		
		$(document).ready(function() {

			{% from "print.html" import exportDataTable %}
			{{exportDataTable("#mktlist",TemplateTitle ,PrintingDate=False)}}

			init.push(function () {
				var options = {
					orientation: $('body').hasClass('right-to-left') ? "auto right" : 'auto auto',
					format:"yyyy-mm-dd",
					autoclose:true
				}
				$('#Date').datepicker(options);
			});

		})            
	</script>
{% endblock %}
