{% extends "layout.html" %}

{% block css %}
	<style type="text/css">
		body {
			background: white;
		}

		table thead th {
			text-align: center;
		}

		.header1{
			color: #888 !important;
			font-size: 16px;
			font-weight: bold;
			margin: 5px 0 10px;
			padding: 10px 18px 0;
		}

		.header2{
			color: #888 !important;
			font-size: 14px;
			font-weight: normal;
			margin: 5px 0 10px;
			padding: 0px 18px 0;
		}


		.head-line{
			color: #888 !important;
			font-size: 16px;
			font-weight: bold;
			margin: 5px 0 10px;
			padding: 10px 0 5px 0 ;
			text-decoration: underline;
		}

		.modal-dialog {
			width: 350px;
		}
	</style>


{% endblock %}

{% block content %}

<div class="navbar navbar-default navbar-static-top">
	{# <form method="GET" id="frm" name="frm" role="form">
		<div class="col-sm-6">
			<div style="margin-top: 8px;">
				<div class="col-sm-4" style="padding-left: 0;">
					<input type="text" name="Date" class="form-control" value="{{ Date }}" style="width: 100%;" placeholder="Date * (yyyy-mm-dd)">
				</div>
				<label class="col-sm-1" style="padding:0px;">
					<button type="submit" class="btn btn-flat btn-labeled btn-primary" style="padding: 7px 25px;">
						Show
					</button>
				</label>
			</div>
		</div>
	</form> #}
		<div class="col-sm-6" style="margin-top: 10px;">
			{% from "print.html" import exportButtonLink %}
                {{exportButtonLink()}}
		</div>
		<div class="col-sm-6" style="margin-top: 8px;">
			<div class="pull-right">
				<button type="button" class="btn btn-flat btn-labeled btn-success" data-toggle="modal" data-target="#getCustomRange">
					<span class="btn-label icon fa fa-gear"></span> Custom
				</button>
			</div>
		</div>
</div>

<div class="container">
	<div class="row">
		<div class="col-sm-12">
			<header>
				<center>
					<h1 class="header1" style="text-transform: uppercase;">{{Company}}</h1>
					<h2 class="header2">SPECIAL REPORT</h2>
				</center>
				
			</header>

			<section>
				
				<div class="row">
					<div class="col-xs-12">
						<table class="table table-bordered table-hover" id="mktlist">
							<thead>
								<tr>
									<th>Branch</th>
									<th>Loan ID</th>
									<th>No</th>
									<th>Repayment Date</th>
									<th>Principal</th>
									<th>Interest</th>
									<th>Total Paid</th>
									<th>OutStanding</th>
									<th>EIR</th>
									<th>Interest</th>
									<th>Principal</th>
									<th>Disbursed Amount</th>
									<th>Year</th>
									<th>Recalculate by EIR</th>
									<th>Perrepayment Schedule</th>
									<th>Diff</th>
								</tr>
							</thead>
							<tbody>
								{%for RepSchedule in SpecialReportList%}
								<tr>
									<td>{{RepSchedule[0]}}</td>
									<td>{{RepSchedule[1]}}</td>
									<td>{{RepSchedule[2]}}</td>
									<td>{{RepSchedule[3]}}</td>
									<td>{{formatNumber(RepSchedule[4])}}</td>
									<td>{{formatNumber(RepSchedule[5])}}</td>
									<td>{{formatNumber(RepSchedule[6])}}</td>
									<td>{{formatNumber(RepSchedule[7])}}</td>
									<td>{{formatNumber(RepSchedule[8])}}</td>
									<td>{{formatNumber(RepSchedule[9])}}</td>
									<td>{{formatNumber(RepSchedule[10])}}</td>
									<td>{{formatNumber(RepSchedule[11])}}</td>
									<td>{{RepSchedule[12]}}</td>
									{% if RepSchedule[13]==' ' and RepSchedule[14]==' ' and RepSchedule[15]==' '%}
									<td></td>
									<td></td>
									<td></td>
									{%else%}
									<td>{{formatNumber(RepSchedule[13])}}</td>
									<td>{{formatNumber(RepSchedule[14])}}</td>
									<td>{{formatNumber(RepSchedule[15])}}</td>
									{%endif%}
									
								</tr>

								{%endfor%}
								
							</tbody>
						</table>
					</div>
						
					

				</div>
			</section>
					
		</div>
	</div>
</div>

<div class="modal fade" id="getCustomRange" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
		<div class="modal-dialog">
			<div class="modal-content">
				<form class="form-horizontal" method="POST">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
						<h4 class="modal-title" id="exampleModalLabel">Custom</h4>
					</div>
					<div class="modal-body">
						<div class="form-group">
							<label for="Branch" class="col-sm-4 control-label">Branch:</label>
							<div class="col-sm-8">
								<input name="Branch" value="{{ Branch }}" class="input-sm form-control" style="width: 100%;">
							</div>
						</div>
						<div class="form-group">
							<label for="LoanProduct" class="col-sm-4 control-label"> Loan Product: </label>
							<div class="col-sm-8">
								<select class="input-sm form-control" id="Product" name="Product" style="width:100%;">
									<optgroup label="Loan Product">
										{%for Pro in LoanProductObj %}
										<option value="{{Pro.ID}}"> {{Pro.ID}}-{{Pro.Description}}</option> 
										{%endfor%}
									 </optgroup>
								</select>
							</div>
						</div>
						<div class="form-group">
							<label for="LoanID" class="col-sm-4 control-label">Loan ID:</label>
							<div class="col-sm-8">
								<textarea name="LoanID" id="LoanID" value={{LoanID}} class="input-sm form-control" style="width: 100%;"></textarea>
							</div>
						</div>
						
					</div>
					<div class="modal-footer">
						<button type="submit" class="btn btn-primary" id="Apply1">Apply</button>
						<button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
					</div>
				</form>
			</div>
		</div>
	</div>

{% endblock %}

{% block js %}

	{% from "print.html" import exportIncludeJS %}
	{{exportIncludeJS()}}

	<script type="text/javascript">
		$('#Apply1').click(function(){
			$('#getCustomRange').modal('hide');
		});
		$(document).ready(function() {


			init.push(function () {
				var options = {
					orientation: $('body').hasClass('right-to-left') ? "auto right" : 'auto auto',
					format:"yyyy-mm-dd",
					autoclose:true
				}
				$('#Date').datepicker(options);
			});
			$('#mktlist').dataTable({
	            "lengthMenu"    : [[10,25,50,100,200, -1], [10,25,50,100,200, "All"]],
	            "bSort"         : false,
	            "pageLength"    : 10,
	        });
			{% from "print.html" import exportDataTable %}
			{{exportDataTable("#mktlist",TemplateTitle ,PrintingDate=False)}}
			
		})            
	</script>
{% endblock %}