from app.mktcore.wtfimports 	import *
from app.Customer.forms 		import *

class FRM_CUSTOMER_EX(FRM_CUSTOMER):
	VBID 			= 	RemoteTextField("Village Bank")
	GroupID 		= 	QuerySelectField('Group',
							query_factory=loadGroupID,
							get_label=lambda a: a.ID + " - " + a.GroupName,
							allow_blank=True,
							blank_text=u'--None--',
							validators=[custom_GroupMember])

	PotentialCustomer 	= 	RemoteTextField("Potential Customer")
	FirstNameEn 	=	TextField(requiredlabel("%s (%s)" %(getLanguage("First Name"), getLanguage("English")),"*"),[validators.Required()])
	LastNameEn 		=	TextField(requiredlabel("%s (%s)" %(getLanguage("Last Name"), getLanguage("English")),"*"),[validators.Required()])
	FirstNameKh 	=	TextField("%s (%s)" %(getLanguage("First Name"), getLanguage("Khmer")))
	LastNameKh 		=	TextField("%s (%s)" %(getLanguage("Last Name"), getLanguage("Khmer")))

	Salutation 		=	SelectField(getLanguage("Salutation"),
							 choices=[('Mrs', 'Mrs'),('Mr', 'Mr'),('Miss','Miss')],
							 coerce=str)
	Gender 			=	SelectField(requiredlabel(getLanguage("Gender"),"*"),
							 choices=[('Female', 'Female'),('Male', 'Male'),('Other','Other')],
							 coerce=str,
							 validators=[validators.Required()])
	DateOfBirth 	=	DateField(requiredlabel(("Date of Birth (YYYY-mm-dd)"), "*"),
							format='%Y-%m-%d',
							validators=[custom_DateOfBirth])
	Nationality		=   QuerySelectField(getLanguage('Nationality'),query_factory=loadCountry, 
							 get_label='Description',
							 allow_blank=True,
							 blank_text='',
							 default=lambda:loadCountry('KH'),
							 validators=[validators.Required()])
	CountryOfBirth 	=	QuerySelectField(getLanguage('Country of Birth'),query_factory=loadCountry, 
							 get_label='Description',
							 allow_blank=True,
							 blank_text='',
							 default=lambda:loadCountry('KH'),
							 validators=[validators.Required()])
	ProvinceOfBirth =	QuerySelectField(getLanguage('Province of Birth'),query_factory=loadProvinceOfBirth, 
							 get_label='Description',
							 allow_blank=True,
							 blank_text=u'--Choose Province--')
	DistrictOfBirth =	QuerySelectField(getLanguage('District of Birth'),query_factory=loadDistrictOfBirth, 
							 get_label='Description',
							 allow_blank=True,
							 blank_text=u'--Choose District--')
	CommuneOfBirth 	=	QuerySelectField(getLanguage('Commune of Birth'),query_factory=loadCommuneOfBirth, 
							 get_label='Description',
							 allow_blank=True,
							 blank_text=u'--Choose Commune--')
	AsGurantor 		=	SelectField(requiredlabel(getLanguage('As Guarantor'),"*"),
							 choices=[('N', 'No'),('Y', 'Yes')],
							 coerce=str,
							 validators=[validators.Required()])
	MaritalStatus 	=	SelectField(requiredlabel(getLanguage('Marital Status'),'*'),
							 choices=[('1', 'Married'),
							 		('2', 'Single'),
							 		('3','Divorced'),
							 		('4','Widow'),
							 		('5','Widower'),
							 		('6','Separated'),
							 		('7','Defacto'),
							 		('8','Unknown')],
							 coerce=str,
							 validators=[validators.Required()])
	Resident 		=	SelectField(getLanguage('Resident'),
							 choices=[('Y', 'Yes'),('N', 'No')],
							 coerce=str,
							 validators=[validators.Required()])

	Officer 		= 	QuerySelectField(requiredlabel(('In-charge Officer'),'*'),
							query_factory=loadOfficer,
							get_label=lambda a: a.ID + " - " + a.LastName + " " +a.FirstName,
							allow_blank=True,
							blank_text=u'--None--',
							validators=[validators.Required()])
	EducationLevel 	=	QuerySelectField('Education Level',
								query_factory=loadEducationLevel, 
								get_label='Description',
								allow_blank=True,
								blank_text=u'--None--'
							)
	# --Identification--
	IDType 			=	QuerySelectField(requiredlabel(getLanguage('ID Type'),'*'),
							 query_factory=loadIdType, 
							 get_label='Description',
							 allow_blank=True,
							 blank_text='--None--',
							 validators=[validators.Required()],
							 description="2-%s" %getLanguage('Identification Document'))
	
	IDNumber 		=	TextField(requiredlabel(getLanguage("ID Number"),"*"),
							 validators=[validators.Required()],
							 description="2-%s" %getLanguage('Identification Document'))
	
	IssuePlace 		=	TextField(requiredlabel(getLanguage("Issue Place"),'*'),
							 description="2-%s" %getLanguage('Identification Document'),
							 validators=[validators.Length(max=35),validators.Required()],)
	
	IssueDate 		=	DateField(requiredlabel(getLanguage("Issue Date"),'*'),
							 description="2-%s" %getLanguage('Identification Document'),
							 validators=[custom_IssueDate])
	
	ExpiryDate 		=	DateField(getLanguage("Expiry Date"),
							 description="2-%s" %getLanguage('Identification Document'),
							 validators=[custom_ExpiryDate])